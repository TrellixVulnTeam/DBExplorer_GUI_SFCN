<!DOCTYPE html>
<html>
<!-- InstanceBegin template="/Templates/main.dwt" codeOutsideHTMLIsLocked="false" -->

<head>
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<!-- InstanceBeginEditable name="doctitle" -->
	<title></title>
	<!-- InstanceEndEditable -->
	<!-- Tell the browser to be responsive to screen width -->
	<meta content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no" name="viewport">
	<!-- jquery -->
	<link rel="stylesheet" href="/bundles/jquery/css/jquery.gridster.css" />
	<link rel="stylesheet" href="/bundles/jquery/css/jquery.jstree.css" />
	<link rel="stylesheet" href="/bundles/jquery/css/jquery.alerts.css" />
	<!-- Bootstrap 3.3.5 -->
	<link rel="stylesheet" href="/bundles/bootstrap/css/bootstrap.min.css" />
	<link rel="stylesheet" href="/bundles/bootstrap/css/bootstrap-datetimepicker.min.css" />
	<!-- Theme style -->
	<link rel="stylesheet" href="/bundles/AdminLTE/css/AdminLTE.min.css">
	<link rel="stylesheet" href="/bundles/AdminLTE/css/skin-blue.css">
	<!-- Font Awesome -->
	<link rel="stylesheet" href="/bundles/fontawesome/css/font-awesome.min.css" />

	<link rel="stylesheet" href="/css/non-responsive.css" />
	<link rel="stylesheet" href="/css/style.css" />
	<link rel="stylesheet" href="/css/style_menu.css" />
	<link rel="stylesheet" href="/css/style_system.css" />
	<link rel="stylesheet" href="/css/style_moon.css" />
	<script type="text/javascript" src="/bundles/jquery/js/jQuery-2.2.0.min.js"></script>
	<script type="text/javascript" src="/js/Common.js"></script>
	<link rel="stylesheet" href="/css/menu_header.css" />
	<!-- InstanceBeginEditable name="StyleRegion" -->
	<style type="text/css" media="all">
		.fullscreenable {
			background: url("/images/background.jpg") 0px 0px / 100% 100% no-repeat !important;
			min-height: 320px;
		}

		.opsel {
			height: 30px;
			padding: 3px 10px;
			;
		}

		.opsel>div>div {
			float: left;
			padding: 0px 10px;
			line-height: 24px;
			cursor: pointer;
			background-color: #f4f4f4;
		}

		.opsel>div>div.active {
			background-color: #0099cc;
			color: #fff;
		}

		.gridster>ul>li>h5 {
			font-weight: bold;
		}

		.smallicon {
			width: 230px;
			margin: 15px 27px 20px;
			float: left;
			position: relative;
			display: none;
		}

		.smallicon-container {
			padding: 0px;
		}

		.btn-primary {
			color: #424851;
			background-color: #e7eaee;
			border-color: #e7eaee
		}

		.btn-primary:hover,
		.btn-primary:active,
		.btn-primary.hover {
			background-color: #414852
		}

		.gridster ul>li>div {
			overflow: hidden;
		}

		.gridster ul>li>div:hover {
			overflow: auto;
		}

		.gridster {
			overflow: auto;
			/* width: 100%; */
			/* height: 100%; */
			width: calc(100% + 140px);
		}

		.back_imgCheck {
			padding: 6px 12px;
			overflow: hidden;
		}

		.back_imgCheck div {
			float: left;
			position: relative;
			margin-right: 20px;
			padding-left: 20px;
			background: url('/images/check01.png') left center no-repeat;
			width: 60px;
			height: 30px;
			white-space: nowrap;
			line-height: 30px;
		}

		.back_imgCheck div img {
			display: block;
			width: 100%;
			height: 100%;
		}

		.back_imgCheck div.act {
			background: url('/images/check02.png') left center no-repeat;
		}

		.back_imgCheck div input {
			display: block;
			position: absolute;
			top: 0;
			left: 0;
			width: 100%;
			height: 100%;
			margin: 0;
			opacity: 0;
			cursor: pointer;
		}

		#nowwarning-btn {
			display: none;
		}

		#handleWarning-btn {
			display: none;
		}

		.table-hover>tbody>tr:hover {
			background-color: transparent;
		}

		.table-hover>tbody>tr:hover>td {
			background-color: transparent;
		}

		#groups-wrapper .jstree-checkbox {
			width: 0;
			height: 0;
		}

		#NetTraffic-groups-wrapper .jstree-checkbox {
			width: 0;
			height: 0;
		}

		.treeview.business {
			display: none;
		}

		.treeview.config {
			display: none;
		}

		.treeview.flow {
			display: none;
		}

		.bar-header {
			border: none;
			padding-left: 15px;
		}

		.bar-header .header-pre {
			background-color: #4AFEF9;
			width: 2px;
			height: 15px;
		}

		.bar-header span:nth-of-type(2) {
			color: #4AFEF9 !important;
			font-size: 14px;
		}

		.gs-w {
			border: 0 !important;
			/* background-color: #162732; */
			background-color: rgba(22, 39, 50, 0.6);
		}

		.tables>thead>tr>th {
			font-size: 12px !important;
		}

		.tables {
			width: 100%;
			min-height: 50px;
			border-bottom: 1px solid #1F4356;
		}

		.gridster ul.gs-resize-disabled>li>div {
			padding: 0 0 0 10px !important;
			width: calc(100% - 10px) !important;
		}
		.wu>.main>canvas {left:0}
		.bfh-colorpicker-popover > canvas{
				float: left;
				margin-right: 10px;
		}
		.bfh-colorpicker-popover > canvas {
			width: 155px;
			height: 150px;
			float: left;
			margin-right: 10px;
		}
	</style>

	<!-- InstanceEndEditable -->
	<!--<script type="text/javascript">
        var user_Id=window.sessionStorage.getItem('user_Id');
        document.write('<link rel="stylesheet" type="text/css" href="/css/skin'+user_Id+'.css?time='+(new Date().getTime())+'">');
    </script>-->
</head>

<body class="hold-transition skin-blue sidebar-mini">

	<div class="wrapper">
		<div style="top: 200px;" class="toggleSlidebar" data-toggle="offcanvas" role="button"></div>

		<header class="main-header">
			<!-- Logo -->
			<div class="logo">
				<!-- mini logo for sidebar mini 50x50 pixels -->
				<div class="logo-mini"></div>
				<!-- logo for regular state and mobile devices -->
				<div class="logo-lg"></div>
			</div>
			<!-- Header Navbar: style can be found in header.less -->
			<nav class="navbar navbar-static-top" role="navigation">
				<div class="navbar-custom-menu">
				</div>
				<div class="navbar-custom-menu1">
				</div>
			</nav>
		</header>
		<aside class="main-sidebar">
            <section class="sidebar">
            </section>
        </aside>
		<div class="content-header-fixed">
			<div class="content-header"
				style="background-color: #00040D !important;border-bottom: 1px solid #3A4249 !important;">
				<!-- InstanceBeginEditable name="PageTitleRegion1" -->
				<div style="float:left">
					<div class="pagename-list" style="margin-top: -3px;margin-right: 2px;">
						<div class="pagename-header">
							<div class="downtext">
								<a href="javascript:;">没有数据请先添加</a>
							</div>
							<div class="downbutton"></div>
						</div>
						<div class="pagename-content">
						</div>
					</div>
					<button type="button" id="dashboard-widget-show-hide" class="btn btn-black hideopcss">编辑</button>
					<button type="button" id="dashboard-widget-addpage" data-toggle="modal"
						data-target="#dashboard-widget-addpage-modal" class="btn btn-black add hideopcss"
						style="">添加</button>
					<button type="button" id="dashboard-widget-editpage" data-toggle="modal"
						data-target="#dashboard-widget-editpage-modal" class="btn btn-black edit hideopcss"
						style="">修改</button>
					<button type="button" id="dashboard-widget-deletepage" class="btn btn-black delete hideopcss"
						style="">删除</button>
					<button type="button" id="dashboard-widget-save" class="btn btn-black save hideopcss"
						style="">保存</button>
				</div>
				<!-- InstanceEndEditable -->
				<div style="float:right">
					<!-- InstanceBeginEditable name="PageTitleRegion2" -->

					<button type="button" id="dashboard-widget-lunbo" data-toggle="modal"
						data-target="#dashboard-widget-lunbo-modal" class="btn btn-default"
						style="display:inline-block">开始轮播</button>

					<!-- InstanceEndEditable -->
					<button id="gloabal-widget-refresh" type="button" class="btn btn-default">刷新</button>
					<button id="gloabal-widget-fullscreen" type="button" class="btn btn-default">全屏</button>
				</div>
			</div>
		</div>
		<!-- Content Wrapper. Contains page content -->
		<div class="content-wrapper" style="background-color: rgb(0, 4, 13) !important;">
			<!-- min-height: 402px; -->
			<!-- Main content -->
			<section class="content" style="padding:0;">
				<div class="fullscreenable">
					<div id="fullscreen-header">
						<div style="display:inline-block;">
							<img src="/css/img/logo_lg.png"
								style="vertical-align: text-bottom; float: left;padding:2px 5px;background:#fff;border-radius:4px;">
							<h3 style="margin: 0px; float: left; padding: 4px;"></h3>
						</div>
					</div>
					<div style="padding:20px;">
						<!-- InstanceBeginEditable name="ContentRegion" -->
						<input type="hidden" name="page_id" id="page-id-storage" value="0" />
						<input type="hidden" name="group_id" id="page-id-group" value="0" />

						<div id="background-help" style="z-index:1">
							<div>
								<span class="view">请点击上方 “编辑” 按钮，激活本页面的操作功能。</span>
								<div class="edit" style="display: none;">
									<span>请双击页面空白处添加视图和图表，拖拽小窗口可以调整小窗口的位置，拖拽小窗口右下角可以调整大小</span>
								</div>
							</div>
						</div>
						<div id="background-help-img"
							style="display:none;text-align:center;position: absolute; width: 72px; height: 72px; z-index:2;top: 400px; cursor:pointer;margin-left:560px;">
							<img src="images/jiahao.png" />
						</div>

						<div id="alerts" data-alerts="alerts"></div>

						<div class="gridster" style="padding: 0 140px 0 0; margin: 0">
							<ul style="height:100%;color:#fff;">
							</ul>
						</div>

						<div class="row" id="show-monitorinfo" style="padding:13px 60px; display:none">
							<div id="monitor-title" style="padding:5px;height:45px;">
								<div style="float:left;font-size:16px;font-weight:bold">
									<img style="margin: 2px 8px 0px 0px; float: left; width:20px; height:20px;"
										src="svg/devices/client-green.svg">
									<span></span>
								</div>

								<div style="float:right;font-size:14px;">
									<a onClick="$('#show-monitorinfo').hide();$('.gridster').show();" href="#">返回</a>
								</div>
							</div>

							<div id="div1">
							</div>
							<div id="div2">
							</div>
						</div>


						<div id="StatusstatView" style="display:none">
							<div>
								<div id="ReportPic" style="padding: 0px 0px 0px -15px !important;">
									<!-- 整体统计 -->
									<div class="row flot-container" style="width:100%;">
										<div class="bar-header" style="margin-top: -2px; margin-bottom:0px;">
											<span class="header-pre"></span> <span> 整体统计</span>
										</div>
										<div style="float:left;width:50%;">
											<div
												style="text-align: center;width:80%;background-color: #0B1117;margin:0 auto;height:30px;line-height: 30px;position: relative;">
												<img src="./css/img/dns-left.png" alt=""
													style="position: absolute;left:0px;top:0;">
												设备总数：<a href="javascript:;"><span class="sunSum"
														style="cursor:pointer;">0</span></a>
												<img src="./css/img/dns-right.png" alt=""
													style="position: absolute;right:0;top:0;">
											</div>
											<div id="All-dev-pie-wrapper" style="width: 100%; height: 220px; "></div>
											<ul class="All-dev-content"
												style="width: 210px; margin: 0px auto 0 auto; padding:0;list-style: outside none none; font-size:14px; line-height:30px">
											</ul>
										</div>
										<div style="float:left;width:50%;">
											<div
												style="text-align: center;width:80%;background-color: #0B1117;margin:0 auto;height:30px;line-height: 30px;position: relative;">
												<img src="./css/img/dns-left.png" alt=""
													style="position: absolute;left:0px;top:0;">
												监测点总数：<a href="javascript:;"><span class="pointSum"
														style="cursor:pointer;">0</span></a>
												<img src="./css/img/dns-right.png" alt=""
													style="position: absolute;right:0;top:0;">
											</div>
											<div id="All-monitor-pie-wrapper" style="width: 100%; height: 220px; ">
											</div>
											<div class="All-monitor-count"
												style="height: 0px; text-align: center; top: -165px; position: relative; font-size: 18px;">
											</div>

											<ul class="All-monitor-content"
												style="width: 210px; margin: 0px auto 0 auto; padding:0; list-style: outside none none; font-size:14px; line-height:30px">
											</ul>
										</div>
										<div class="clear"></div>
									</div>
									<!-- 故障统计 -->
									<!-- <div class="row flot-container" style="min-width:720px">
							<div class="bar-header" style="margin-bottom:0px">
								<span class="header-pre"></span> <span> 故障统计</span>
							</div>
							<div style="float:left; width:480px;padding: 0px 0px;">
								<div id="danger-pie-wrapper" style="height: 230px; width:480px; margin-top: -10px">
								</div>
							</div>
							<div style="float:left;padding-top: 18px;">
								<ul id="danger-content" class="danger-content" style="font-size:12px">
								</ul>
							</div>
						</div> -->
									<!-- 危险统计 -->
									<!-- <div class="row flot-container" style="min-width:720px">
							<div class="bar-header" style="margin-bottom:0px">
								<span class="header-pre"></span> <span> 危险统计</span>
							</div>
							<div style="float:left; width:480px;padding: 0px 0px;">
								<div id="warning-pie-wrapper" style="height: 230px; width:480px; margin-top: -10px">
								</div>
							</div>
							<div style="float:left;padding-top: 18px;">
								<ul id="warning-content" class="danger-content" style="font-size:12px">
								</ul>
							</div>
						</div> -->
								</div>
								<input type="hidden" id="devsta" value="">
								<div id="ReportData" style="display:none">
									<div class="" style="min-heigth:30px;height:30px">
										<div style="float:right;font-size:14px;margin-right:20px;">
											<a class="back1" href="#">&lt;&lt;返回</a>
										</div>
									</div>
									<div class="">
										<div class="event-pane active" style="width:100%;">
											<table class="table table-condensed"
												style="font-size:12px;border-collapse:inherit;table-layout:fixed;">
												<thead>
													<tr style="height:34px; width:100%">
														<th data-colname="0"
															style="border: 0px none; width: 100px; padding: 0px;">设备名称
														</th>
														<th data-colname="1"
															style="border: 0px none; width: 100px; padding: 0px;">监测点名称
														</th>
														<th data-colname="2"
															style="border: 0px none; width: 40px; padding: 0px;">状态</th>
														<th data-colname="10"
															style="border: 0px none; width: 100px; padding: 0px;">指标
														</th>
														<th data-colname="11"
															style="border: 0px none; width: 90px; padding: 0px;">值</th>
														<th data-colname="12"
															style="border: 0px none; width: 100px; padding: 0px;"><span
																class="st-square st-square-yellow"></span>&nbsp;危险阀值
														</th>
														<th data-colname="13"
															style="border: 0px none; width: 100px; padding: 0px;"><span
																class="st-square st-square-red"></span>&nbsp;故障阀值</th>
														<th data-colname="3"
															style="border: 0px none; width: 100px; padding: 0px;">最后更新时间
														</th>
														<th data-colname="14"
															style="border: 0px none; width: 40px; padding: 0px;">操作</th>
													</tr>
												</thead>
												<tbody>
													<tr>
														<td colspan="11"></td>
													</tr>
												</tbody>
												<tfoot>
												</tfoot>
											</table>
										</div>
										<div id="pageinfo"></div>
									</div>
								</div>

								<div id="sunDiv" style="display:none">
									<div class="" style="min-heigth:30px;height:30px">
										<div style="float:right;font-size:14px;margin-right:20px;">
											<a class="back1" href="#">&lt;&lt;返回</a>
										</div>
									</div>
									<h4> 设备数量统计表格 （<span class="sunSum"></span>）</h4>
									<table class="table table-condensed">
										<thead>
											<tr>
												<th style="">分类</th>
												<th style=""><a href="javascript:;">名称 <span class=""></span></a></th>
												<th style=""><a href="javascript:;">数量 <span class=""></span></a></th>
											</tr>
										</thead>
										<tbody id="sunStr">
											<tr>
												<td></td>
											</tr>
										</tbody>
									</table>
								</div>

								<div id="pointDiv" style="display:none">
									<div class="" style="min-heigth:30px;height:30px">
										<div style="float:right;font-size:14px;margin-right:20px;">
											<a class="back1" href="#">&lt;&lt;返回</a>
										</div>
									</div>
									<h4> 监测点数量统计表格 （<span class="pointSum"></span>）</h4>
									<table class="table table-condensed">
										<thead>
											<tr>
												<th style="">分类</th>
												<th style=""><a href="javascript:;">名称 <span class=""></span></a></th>
												<th style=""><a href="javascript:;">数量 <span class=""></span></a></th>
											</tr>
										</thead>
										<tbody id="pointStr">
											<tr>
												<td></td>
											</tr>
										</tbody>
									</table>
								</div>

							</div>
						</div>
						<!-- InstanceEndEditable -->
					</div>

					<div id="pagemodal">
						<div id="help-modal" class="modal fade bs-modal-lt" tabindex="-1" role="dialog"
							aria-labelledby="myLargeModalLabel" aria-hidden="true">
							<div class="modal-dialog" style="width:450px;">
								<div class="modal-content">
									<div class="modal-header">
										<button type="button" class="close" data-dismiss="modal"
											aria-hidden="true">&times;</button>
										<h4 id="testResult_title" class="modal-title">关于&nbsp;&nbsp;CreCloud</h4>
									</div>
									<div class="modal-body">
										<div style="width:100px; height:85px; margin:35px auto 30px auto;">
											<img src="/images/logo.png">
										</div>
										<div id="cpinfo" style="text-align:center">

										</div>
									</div>
								</div>
							</div>
						</div>

						<form id="uppwd" class="form-horizontal">
							<div class="modal fade" id="updatePwd" tabindex="-1" role="dialog"
								aria-labelledby="myModalLabel">
								<div class="modal-dialog" role="document">
									<div class="modal-content">
										<div class="modal-header">
											<button type="button" class="close" data-dismiss="modal"
												aria-label="Close"><span aria-hidden="true">&times;</span></button>
											<h4 class="modal-title" id="myModalLabel">修改密码</h4>
										</div>
										<div class="modal-body">
											<div class="form-group">
												<label class="control-label col-sm-2">原密码:</label>
												<div class="col-sm-10">
													<input id="pwdOld" name="pwdOld" class="form-control" required
														type="password" placeholder="请输入原密码">
												</div>
											</div>
											<div class="form-group">
												<label class="control-label col-sm-2">新密码:</label>
												<div class="col-sm-10">
													<input id="pwdNew" name="pwdNew" class="form-control" required
														type="password" placeholder="请输入8-20位数字和字母的组合的密码"
														required-message="请输入新密码" minlength="8" maxlength="20"
														minlength-message="密码长度至少为8位数">
												</div>
											</div>
											<div class="form-group">
												<label class="control-label col-sm-2">再次确认:</label>
												<div class="col-sm-10">
													<input id="entPwd" name="entPwd" class="form-control" required
														type="password" placeholder="请输入8-20位数字和字母的组合的密码"
														required-message="请输入确认密码" minlength="8" maxlength="20"
														minlength-message="密码长度至少为8位数">
												</div>
											</div>
											<div class="form-group text-center">
												<button type="submit" class="modalbtn ok">确定</button>
												<button type="button" class="modalbtn cancel"
													data-dismiss="modal">取消</button>
											</div>
										</div>
									</div>
								</div>
							</div>
						</form>

						<div class="modal fade" id="download-modal" tabindex="-1" role="dialog"
							aria-labelledby="myModalLabel">
							<div class="modal-dialog" role="document">
								<div class="modal-content">
									<div class="modal-header">
										<button type="button" class="close" data-dismiss="modal"
											aria-label="Close"><span aria-hidden="true">&times;</span></button>
										<h4 class="modal-title">安装包下载</h4>
									</div>
									<div class="modal-body">
										<table class="table">
											<tr>
												<td>WindowsAgent</td>
												<td><a
														href="http://www.mxsoft.com/download/jiankongyi/JianKongYi_Professional_WindowsAgent3.1.0.zip">官网下载</a>
												</td>
												<td><a href="http://pan.baidu.com/s/1c1IndSW">百度网盘下载</a></td>
											</tr>
											<tr>
												<td>LinuxAgent</td>
												<td><a
														href="http://www.mxsoft.com/download/jiankongyi/Linux-Agent.zip">官网下载</a>
												</td>
												<td><a href="http://pan.baidu.com/s/1pK8xmpt">百度网盘下载</a></td>
											</tr>
											<tr>
												<td>基础版</td>
												<td>&nbsp;</td>
												<td><a href="http://pan.baidu.com/s/1o7LWyNK">百度网盘下载</a></td>
											</tr>
											<tr>
												<td>扩展版</td>
												<td>&nbsp;</td>
												<td><a href="http://pan.baidu.com/s/1o7LWyNK">百度网盘下载</a></td>
											</tr>
											<tr>
												<td>完整版</td>
												<td>&nbsp;</td>
												<td><a href="http://pan.baidu.com/s/1c26XUtq">百度网盘下载</a></td>
											</tr>
										</table>
									</div>
									<div class="modal-footer">
										<button type="button" class="modalbtn ok" data-dismiss="modal">关闭</button>
									</div>
								</div>
							</div>
						</div>
						<!-- InstanceBeginEditable name="ModalRegion" -->
						<div id="ipReport" class="modal fade bs-modal-lt" tabindex="-1" role="dialog"
							aria-labelledby="myLargeModalLabel" aria-hidden="true">
							<div class="modal-dialog modal-lg">
								<div class="modal-content">
									<div class="modal-body">
										<a type="button" class="close" data-dismiss="modal" aria-hidden="true"
											style="line-height:8px;margin-top:-15px">&times;</a>
										<div class="row" id="div1">
										</div>
										<div class="row" id="div2" style="overflow:hidden">
										</div>
									</div>
								</div>
							</div>
						</div>

						<div id="visio-modal" class="modal fade bs-modal-lg" tabindex="-1" role="dialog"
							aria-labelledby="myLargeModalLabel" aria-hidden="true">
							<div class="modal-dialog modal-lg">
								<div class="modal-content" style="padding: 15px;">
									<div class="modal-header">
										<a type="button" class="close" data-dismiss="modal" aria-hidden="true"
											style="line-height:8px;margin-top: -8px;">&times;</a>
									</div>
									<div class="modal-body">
										<a type="button" class="close" data-dismiss="modal" aria-hidden="true"
											style="line-height:8px;">&times;</a>
										<div class="row"></div>
									</div>
								</div>
							</div>
						</div>

						<div id="sunModal" class="modal fade bs-modal-lg" tabindex="-1" role="dialog"
							aria-labelledby="myLargeModalLabel" aria-hidden="true">
							<div class="modal-dialog modal-lg">
								<div class="modal-content cremodal">
									<div>
										<a class="close" data-dismiss="modal" style="float:right;">×</a>
									</div>
									<h4> 设备数量统计表格 （<span class="sunSum"></span>）</h4>
									<table class="table table-bordered table-condensed">
										<thead>
											<tr>
												<th style="text-align:center">分类</th>
												<th style="text-align:center"><a href="javascript:;">名称 <span
															class=""></span></a></th>
												<th style="text-align:center"><a href="javascript:;">数量 <span
															class=""></span></a></th>
											</tr>
										</thead>
										<tbody data-id="sunStr">
											<tr>
												<td></td>
											</tr>
										</tbody>
									</table>
								</div>
							</div>
						</div>
						<div id="pointModal" class="modal fade bs-modal-lg" tabindex="-1" role="dialog"
							aria-labelledby="myLargeModalLabel" aria-hidden="true">
							<div class="modal-dialog modal-lg">
								<div class="modal-content cremodal">
									<div>
										<a class="close" data-dismiss="modal" style="float:right;">×</a>
									</div>
									<h4> 监测点数量统计表格 （<span class="pointSum"></span>）</h4>
									<table class="table table-bordered table-condensed">
										<thead>
											<tr>
												<th style="text-align:center">分类</th>
												<th style="text-align:center"><a href="javascript:;">名称 <span
															class=""></span></a></th>
												<th style="text-align:center"><a href="javascript:;">数量 <span
															class=""></span></a></th>
											</tr>
										</thead>
										<tbody data-id="pointStr">
											<tr>
												<td></td>
											</tr>
										</tbody>
									</table>
								</div>
							</div>
						</div>

						<div id="AlertDetailInfoModal" class="modal fade bs-modal-lg" tabindex="-1" role="dialog"
							aria-labelledby="myLargeModalLabel" aria-hidden="true">
							<div class="modal-dialog modal-lg">
								<div class="modal-content cremodal">
									<div>
										<a class="close" data-dismiss="modal" style="float:right;">×</a>
									</div>
									<h4> 告警详细信息 （<span class="sunSum"></span>）</h4>
									<table class="table table-condensed">
										<thead>
											<tr>
												<th style="text-align:center"></th>
												<th style="text-align:center">告警时间</th>
												<th style="text-align:center">告警名称</th>
												<th style="text-align:center">监测点名称</th>
												<th style="text-align:center">状态</th>
												<th style="text-align:center">告警方式</th>
												<th style="text-align:center">备注</th>
											</tr>
										</thead>
										<tbody>
											<tr>
												<td></td>
											</tr>
										</tbody>
									</table>
								</div>
							</div>
						</div>
						<div id="EventDetailInfoModal" class="modal fade bs-modal-lg" tabindex="-1" role="dialog"
							aria-labelledby="myLargeModalLabel" aria-hidden="true">
							<div class="modal-dialog modal-lg">
								<div class="modal-content cremodal">
									<div>
										<a class="close" data-dismiss="modal" style="float:right;">×</a>
									</div>
									<h4> 事件详细信息 （<span class="sunSum"></span>）</h4>
									<table class="table table-condensed">
										<thead>
											<tr>
												<th style="text-align:center"></th>
												<th style="text-align:center">事件时间</th>
												<th style="text-align:center">状态</th>
												<th style="text-align:center">级别</th>
												<th style="text-align:center">来源</th>
												<th style="text-align:center">描述</th>
											</tr>
										</thead>
										<tbody>
											<tr>
												<td></td>
											</tr>
										</tbody>
									</table>
								</div>
							</div>
						</div>

						<!--topo line-->
						<div id="topo-line-modal" class="modal fade bs-modal-lt" tabindex="-1" role="dialog"
							aria-labelledby="myLargeModalLabel" aria-hidden="true">
							<div class="modal-dialog modal-lt">
								<div class="modal-content">
									<div class="modal-body">
										<!--<a type="button" class="close" data-dismiss="modal" aria-hidden="true"
											style="line-height:8px;margin-top:-15px">&times;</a>-->
										<div>
										</div>
									</div>
								</div>
							</div>
						</div>

						<div id="timesel-modal" class="modal fade" tabindex="-1" role="dialog" aria-hidden="true">
							<div class="modal-dialog">
								<div class="modal-content">
									<form id="timesel-form" class="form-horizontal" role="form">
										<div class="modal-header">
											<button type="button" class="close" data-dismiss="modal"
												aria-hidden="true">&times;</button>
											<h4 class="modal-title">查询时间</h4>
										</div>
										<div class="modal-body">
											<div class="form-group">
												<label class="control-label col-sm-2" for="topo-f-name">选择日期</label>
												<div class="col-sm-10">
													<div class="input-group date form_datetime"
														data-date-format="yyyy-mm-dd">
														<input name="begintime" class="form-control input-sm"
															placeholder="选择日期" size="16" type="text" value=""
															readonly />
														<span class="input-group-addon"><span
																class="glyphicon glyphicon-time"></span></span></div>
												</div>
											</div>
											<div class="form-group">
												<label class="control-label col-sm-2"
													style="padding-top:2px">选择日期段</label>
												<div class="col-sm-10">
													<table style="font-size:12px">
														<tr>
															<td style="width:80px"><input id="riqiduan1" type="radio"
																	name="riqiduan" value="1" checked="true" />
																<label for="riqiduan1">当天</label></td>
															<td style="width:80px"><input id="riqiduan2" type="radio"
																	name="riqiduan" value="2" />
																<label for="riqiduan2">所在周</label></td>
															<td style="width:80px"><input id="riqiduan3" type="radio"
																	name="riqiduan" value="3" />
																<label for="riqiduan3">所在月</label></td>
														</tr>
													</table>
												</div>
											</div>
										</div>
										<div class="modal-footer">
											<button type="submit" class="btn btn-default ok">确定</button>
											<button type="button" class="btn btn-default"
												data-dismiss="modal">取消</button>
										</div>
									</form>
								</div>
							</div>
						</div>

						<div id="dashboard-widget-add-modal" class="modal fade bs-modal-lg" tabindex="-1" role="dialog"
							aria-labelledby="myLargeModalLabel" aria-hidden="true">
							<div class="modal-dialog">
								<div class="modal-content">
									<form id="dashboard-widget-add-form" class="form-horizontal" role="form">
										<div class="modal-header">
											<button type="button" class="close" data-dismiss="modal"
												aria-hidden="true">&times;</button>
											<h4 class="modal-title">添加视图</h4>
										</div>
										<div class="modal-body">
											<div class="form-group" style="margin-bottom:5px">
												<label class="control-label col-sm-2" for="ds-widget-type">视图类型</label>
												<div class="col-sm-10 control-input">
													<select class="form-control" id="ds-widget-type">
														<option value="4">状态统计</option>
														<option value="1">苹果树</option>
														<option value="2">设备视图</option>
														<option value="3">监测点视图</option>
														<option value="5">告警视图</option>
														<option value="7">Visio 视图</option>
														<option value="8">拓扑视图</option>
														<option value="9">链路图</option>
													</select>
												</div>
											</div>
											<div id="ds-widget-name-input" class="form-group"
												style="display: none;margin-bottom:5px">
												<label class="control-label col-sm-2" for="ds-widget-name">标题</label>
												<div class="col-sm-10">
													<input type="text" name="chart_name" value="" id="ds-widget-name"
														class="form-control" />
												</div>
											</div>
											<div id="ds-widget-appletree" class="form-group input-init-hide"
												style="display: none;margin-bottom:5px">
												<label class="control-label col-sm-2"
													for="ds-widget-appletree-id">选择苹果树</label>
												<div class="col-sm-10 control-input">
													<select id="ds-widget-appletree-id" class="form-control"></select>
												</div>
											</div>
											<div id="ds-widget-monitor" class="form-group input-init-hide"
												style="display: none;margin-bottom:5px">
												<label class="control-label col-sm-2" for="ds-widget-monitor-id"
													style="white-space: nowrap; text-overflow: ellipsis;">选择监测视图</label>
												<div class="col-sm-10 control-input">
													<select id="ds-widget-monitor-id" class="form-control"></select>
												</div>
											</div>
											<div id="ds-widget-status" class="form-group input-init-hide"
												style="margin-bottom:5px">
												<label class="control-label col-sm-2" for="ds-widget-status-id"
													style="white-space: nowrap; text-overflow: ellipsis;">选择状态统计视图</label>
												<div class="col-sm-10 control-input">
													<select id="ds-widget-status-id" class="form-control"></select>
												</div>
											</div>
											<div id="ds-widget-warning" class="form-group input-init-hide"
												style="display: none;margin-bottom:5px">
												<label class="control-label col-sm-2" for="ds-widget-warning-id"
													style="white-space: nowrap; text-overflow: ellipsis;">选择告警事件视图</label>
												<div class="col-sm-10 control-input">
													<select id="ds-widget-warning-id" class="form-control"></select>
												</div>
											</div>
											<div id="ds-widget-topo" class="form-group input-init-hide"
												style="display: none;margin-bottom:5px">
												<label class="control-label col-sm-2"
													for="ds-widget-topo-id">选择拓扑图</label>
												<div class="col-sm-10 control-input">
													<select id="ds-widget-topo-id" class="form-control"></select>
												</div>
											</div>
											<div id="ds-widget-visio" class="form-group input-init-hide"
												style="display: none;margin-bottom:5px">
												<label class="control-label col-sm-2"
													for="ds-widget-visio-id">选择Visio图</label>
												<div class="col-sm-10 control-input">
													<select id="ds-widget-visio-id" class="form-control"></select>
												</div>
											</div>
											<div id="ds-widget-sycs" class="form-group input-init-hide"
												style="display: none;margin-bottom:5px">
												<label class="control-label col-sm-2"
													for="ds-widget-sycs-id">选择链路图</label>
												<div class="col-sm-10 control-input">
													<select id="ds-widget-sycs-id" class="form-control"></select>
												</div>
											</div>
											<div class="form-group" style="margin-bottom:5px">
												<div class="col-sm-offset-2 col-sm-10">
													<div class="checkbox">
														<label style="line-height: 20px;">
															<input id="ds-display-title-ornot" type="checkbox"
																name="title_ornot" /> 显示标题
														</label>
													</div>
												</div>
											</div>
										</div>
										<div class="modal-footer">
											<input id="ds-widget-param-id" type="hidden" name="param-id" />
											<button type="submit" class="modalbtn ok">确定</button>
										</div>
									</form>
								</div>
							</div>
						</div>

						<div id="dashboard-widget-edit-modal" class="modal fade bs-modal-lg" tabindex="-1" role="dialog"
							aria-labelledby="myLargeModalLabel" aria-hidden="true">
							<div class="modal-dialog">
								<div class="modal-content">
									<form id="dashboard-widget-edit-form" class="form-horizontal" role="form">
										<div class="modal-header">
											<button type="button" class="close" data-dismiss="modal"
												aria-hidden="true">&times;</button>
											<h4 class="modal-title">修改视图</h4>
										</div>
										<div class="modal-body">
											<div class="form-group" style="margin-bottom:5px">
												<label class="control-label col-sm-2"
													for="ds-widget-edit-type">视图类型</label>
												<div class="col-sm-10 control-input">
													<select class="form-control" id="ds-widget-edit-type">
														<option value="4">状态统计</option>
														<option value="1">苹果树</option>
														<option value="2">设备视图</option>
														<option value="3">监测点视图</option>
														<option value="5">告警视图</option>
														<option value="7">Visio 视图</option>
														<option value="8">拓扑视图</option>
														<option value="9">链路图</option>
													</select>
												</div>
											</div>
											<div id="ds-widget-edit-name-input" class="form-group"
												style="display: none;margin-bottom:5px">
												<label class="control-label col-sm-2"
													for="ds-widget-edit-name">标题</label>
												<div class="col-sm-10">
													<input type="text" name="chart_name" value=""
														id="ds-widget-edit-name" class="form-control" />
												</div>
											</div>
											<div id="ds-widget-edit-appletree" class="form-group input-init-hide"
												style="display: none;margin-bottom:5px">
												<label class="control-label col-sm-2" for="ds-widget-edit-appletree-id"
													style="line-height: 40px;">选择苹果树</label>
												<div class="col-sm-10 control-input">
													<select id="ds-widget-edit-appletree-id"
														class="form-control"></select>
												</div>
											</div>
											<div id="ds-widget-edit-monitor" class="form-group input-init-hide"
												style="display: none;margin-bottom:5px">
												<label class="control-label col-sm-2" for="ds-widget-edit-monitor-id"
													style="line-height: normal;">选择检测<br />视图</label>
												<div class="col-sm-10 control-input">
													<select id="ds-widget-edit-monitor-id"
														class="form-control"></select>
												</div>
											</div>
											<div id="ds-widget-edit-status" class="form-group input-init-hide"
												style="margin-bottom:5px">
												<label class="control-label col-sm-2" for="ds-widget-edit-status-id"
													style="line-height: normal;">选择状态<br />统计视图</label>
												<div class="col-sm-10 control-input">
													<select id="ds-widget-edit-status-id" class="form-control"></select>
												</div>
											</div>
											<div id="ds-widget-edit-warning" class="form-group input-init-hide"
												style="display: none;margin-bottom:5px">
												<label class="control-label col-sm-2" for="ds-widget-edit-warning-id"
													style="line-height: normal;">选择告警<br />事件视图</label>
												<div class="col-sm-10 control-input">
													<select id="ds-widget-edit-warning-id"
														class="form-control"></select>
												</div>
											</div>
											<div id="ds-widget-edit-topo" class="form-group input-init-hide"
												style="display: none;margin-bottom:5px">
												<label class="control-label col-sm-2"
													for="ds-widget-edit-topo-id">选择拓扑图</label>
												<div class="col-sm-10 control-input">
													<select id="ds-widget-edit-topo-id" class="form-control"></select>
												</div>
											</div>
											<div id="ds-widget-edit-visio" class="form-group input-init-hide"
												style="display: none;margin-bottom:5px">
												<label class="control-label col-sm-2" for="ds-widget-edit-visio-id"
													tyle="line-height: normal;">选择Visio图</label>
												<div class="col-sm-10 control-input">
													<select id="ds-widget-edit-visio-id" class="form-control"></select>
												</div>
											</div>
											<div id="ds-widget-edit-sycs" class="form-group input-init-hide"
												style="display: none;margin-bottom:5px">
												<label class="control-label col-sm-2" for="ds-widget-edit-sycs-id"
													tyle="line-height: normal;">选择链路图</label>
												<div class="col-sm-10 control-input">
													<select id="ds-widget-edit-sycs-id" class="form-control"></select>
												</div>
											</div>
											<div class="form-group" style="margin-bottom:5px">
												<div class="col-sm-offset-2 col-sm-10">
													<div class="checkbox">
														<label>
															<input id="ds-edit-display-title-ornot" type="checkbox"
																name="title_ornot" /> 显示标题
														</label>
													</div>
												</div>
											</div>
										</div>
										<div class="modal-footer">
											<input id="ds-widget-edit-param-id" type="hidden" data-timestamp="" name="param-id" />
											<button type="submit" class="modalbtn ok">确定</button>
										</div>
									</form>
								</div>
							</div>
						</div>

						<div id="dashboard-chart-add-modal" class="modal fade" tabindex="-1" role="dialog"
							aria-labelledby="myLargeModalLabel" aria-hidden="true">
							<div class="modal-dialog">
								<div class="modal-content">
									<form id="dashboard-chart-add-form" class="form-horizontal" role="form">
										<div class="modal-header">
											<button type="button" class="close" data-dismiss="modal"
												aria-hidden="true">&times;</button>
											<h4 class="modal-title">添加图表</h4>
										</div>
										<div class="modal-body">
											<div class="form-group" style="margin-bottom:5px">
												<label class="control-label col-sm-2" for="ds-chart-point">监测点</label>
												<div class="col-sm-10">
													<input id="ds-chart-point" class="form-control" type="text"
														name="chart_point" style="cursor:pointer" />
												</div>
											</div>
											<div class="form-group" style="margin-bottom:5px">
												<label class="control-label col-sm-2"
													for="ds-chart-description">描述</label>
												<div class="col-sm-10 control-input">
													<select id="ds-chart-description" class="form-control"
														name="chart_description">
														<option value="1">面积图</option>
														<option value="2">线图</option>
														<option value="3" selected="selected">柱状图</option>
														<option value="4">表盘</option>
													</select>
												</div>
											</div>
											<div class="form-group" id="div-ds-chart-time" style="margin-bottom:5px">
												<label class="control-label col-sm-2" for="ds-chart-time">时间范围</label>
												<div class="col-sm-10 control-input">
													<select id="ds-chart-time" class="form-control" name="chart_time">
														<option value="1">1小时</option>
														<option value="2">2小时</option>
														<option value="4">4小时</option>
														<option value="12">半天</option>
														<option value="24">1天</option>
													</select>
												</div>
											</div>
											<div class="form-group" id="div-ds-chart-color" style="margin-bottom:5px">
												<label class="control-label col-sm-2" for="ds-chart-color">颜色</label>
												<div id="ds-chart-color" class="col-sm-10">
													<div class="bfh-colorpicker" data-name="chartcolor"
														style="cursor:pointer">
													</div>
												</div>
											</div>
											<div class="form-group" style="margin-bottom:5px">
												<label class="control-label col-sm-2" for="ds-chart-name">名称</label>
												<div class="col-sm-10">
													<input type="text" name="chart_name" value="" id="ds-chart-name"
														class="form-control" />
												</div>
											</div>
										</div>
										<div class="modal-footer">
											<input type="hidden" name="chart_did" value="" id="ds-chart-did"
												class="form-control" />
											<input type="hidden" name="chart_mid" value="" id="ds-chart-mid"
												class="form-control" />
											<input type="hidden" name="chart_indicator" value="" id="ds-chart-indicator"
												class="form-control" />
											<button type="submit" class="modalbtn ok">确定</button>
										</div>
									</form>
								</div>
							</div>
						</div>

						<div id="dashboard-chart-edit-modal" class="modal fade" tabindex="-1" role="dialog"
							aria-labelledby="myLargeModalLabel" aria-hidden="true">
							<div class="modal-dialog">
								<div class="modal-content">
									<form id="dashboard-chart-edit-form" class="form-horizontal" role="form">
										<div class="modal-header">
											<button type="button" class="close" data-dismiss="modal"
												aria-hidden="true">&times;</button>
											<h4 class="modal-title">修改图表</h4>
										</div>
										<div class="modal-body">
											<div class="form-group" style="margin-bottom:5px">
												<label class="control-label col-sm-2" for="ds-chart-point">监测点</label>
												<div class="col-sm-10">
													<input id="ds-chart-edit-point" class="form-control" type="text"
														name="chart_point" style="cursor:pointer" />
												</div>
											</div>
											<div class="form-group" style="margin-bottom:5px">
												<label class="control-label col-sm-2"
													for="ds-chart-description">描述</label>
												<div class="col-sm-10 control-input" style="width:475px;margin-left:0">
													<select id="ds-chart-edit-description" class="form-control"
														name="chart_description" style="height:34px">
														<option value="1">面积图</option>
														<option value="2">线图</option>
														<option value="3" selected="selected">柱状图</option>
														<option value="4">表盘</option>
													</select>
												</div>
											</div>
											<div class="form-group" id="div-ds-chart-time" style="margin-bottom:5px">
												<label class="control-label col-sm-2" for="ds-chart-time">时间范围</label>
												<div class="col-sm-10 control-input" style="width:475px;margin-left:0">
													<select id="ds-chart-edit-time" class="form-control"
														name="chart_time" style="height:34px">
														<option value="1">1小时</option>
														<option value="2">2小时</option>
														<option value="4">4小时</option>
														<option value="12">半天</option>
														<option value="24">1天</option>
													</select>
												</div>
											</div>
											<div class="form-group" id="div-ds-chart-edit-color"
												style="margin-bottom:5px">
												<label class="control-label col-sm-2"
													for="ds-chart-edit-color">颜色</label>
												<div id="ds-chart-edit-color" class="col-sm-10">
													<div class="bfh-colorpicker" data-name="chartcolor"
														style="cursor:pointer">
													</div>
												</div>
											</div>
											<div class="form-group" style="margin-bottom:5px">
												<label class="control-label col-sm-2" for="ds-chart-name">名称</label>
												<div class="col-sm-10">
													<input type="text" name="chart_name" value=""
														id="ds-chart-edit-name" class="form-control" />
												</div>
											</div>
										</div>
										<div class="modal-footer">
											<input type="hidden" name="chart_did" value="" id="ds-chart-edit-did"
												class="form-control" />
											<input type="hidden" name="chart_mid" value="" id="ds-chart-edit-mid"
												class="form-control" />
											<input type="hidden" name="chart_indicator" value=""
												id="ds-chart-edit-indicator" class="form-control" />
											<button type="submit" class="modalbtn ok" style="">确定</button>
										</div>
									</form>
								</div>
							</div>
						</div>

						<div id="dashboard-title-edit" class="modal fade bs-modal-lg" tabindex="-1" role="dialog"
							aria-labelledby="myLargeModalLabel" aria-hidden="true">
							<div class="modal-dialog">
								<div class="modal-content">
									<form id="dashboard-title-edit-form" class="form-horizontal" role="form">
										<div class="modal-header">
											<button type="button" class="close" data-dismiss="modal"
												aria-hidden="true">&times;</button>
											<h4 class="modal-title">编辑标题</h4>
										</div>
										<div class="modal-body">
											<div class="form-group">
												<label class="control-label col-sm-2" for="ds-widget-title">视图标题</label>
												<div class="col-sm-10">
													<input id="ds-widget-title" class="form-control" type="text"
														name="title" />
												</div>
											</div>
										</div>
										<div class="modal-footer">
											<button type="submit" class="modalbtn ok">确定</button>
											<button type="button" class="modalbtn cancel"
												data-dismiss="modal">取消</button>
										</div>
									</form>
								</div>
							</div>
						</div>

						<div id="dashboard-topn-add-modal" class="modal fade" tabindex="-1" role="dialog"
							aria-labelledby="myLargeModalLabel" aria-hidden="true">
							<div class="modal-dialog">
								<div class="modal-content">
									<form id="dashboard-topn-add-form" class="form-horizontal" role="form">
										<div class="modal-header">
											<button type="button" class="close" data-dismiss="modal"
												aria-hidden="true">&times;</button>
											<h4 class="modal-title">添加TopN报表</h4>
										</div>
										<div class="modal-body" style="max-height:350px;overflow:auto;">
											<div class="form-group" style="margin-bottom:5px">
												<label class="control-label col-sm-2"
													for="ds-topn-Pagerowcount">列表个数</label>
												<div class="col-sm-10">
													<input id="ds-topn-Pagerowcount" class="form-control" type="text"
														name="Pagerowcount" value="10" style="" />
												</div>
											</div>
											<div class="form-group" style="margin-bottom:5px">
												<label class="control-label col-sm-2"></label>
												<div class="col-sm-10">
													<input id="ds-topn-IsShowMonitorName" type="checkbox"
														name="IsShowMonitorName" value="1" />
													<label for="ds-topn-IsShowMonitorName">显示监测点名称</label>
												</div>
											</div>
											<div class="form-group" style="margin-bottom:5px">
												<label class="control-label col-sm-2"
													style="line-height:normal">选择设备<br />列表</label>
												<div class="col-sm-10">
													<div
														style="max-height:200px;height:200px;border:1px solid #d2d6de;overflow:auto;border-radius:4px;padding-top:10px;">
														<div id="ds-topn-Scope"></div>
													</div>
												</div>
											</div>
											<div class="form-group" style="margin-bottom:5px">
												<label class="control-label col-sm-2"
													for="ds-topn-PluginName">监测类型</label>
												<div class="col-sm-10 control-input">
													<select id="ds-topn-PluginName" class="form-control"
														name="PluginName" style="">
													</select>
												</div>
											</div>
											<div class="form-group" style="margin-bottom:5px">
												<label class="control-label col-sm-2"
													for="ds-topn-Indication">监测指标</label>
												<div class="col-sm-10 control-input">
													<select id="ds-topn-Indication" class="form-control"
														name="Indication" style="">
													</select>
												</div>
											</div>
											<div class="form-group" style="margin-bottom:5px">
												<label class="control-label col-sm-2" for="ds-topn-point">报告标题</label>
												<div class="col-sm-10">
													<input id="ds-topn-title" class="form-control" type="text"
														name="title" style="" />
												</div>
											</div>
											<div class="form-group" style="margin-bottom:5px;display:none">
												<label class="control-label col-sm-2">统计方式</label>
												<div class="col-sm-10">
													<input id="ds-topn-StatType1" type="radio" name="StatType" value="0"
														checked="true" />
													<label for="ds-topn-StatType1">最新一次</label>
													<input id="ds-topn-StatType2" type="radio" name="StatType"
														value="1" />
													<label for="ds-topn-StatType2">平均值</label>
												</div>
											</div>
											<div class="form-group" style="margin-bottom:5px;display:none">
												<label class="control-label col-sm-2">排序方式</label>
												<div class="col-sm-10">
													<input id="ds-topn-SortOp1" type="radio" name="SortOp" value="0"
														checked="true" />
													<label for="ds-topn-SortOp1">从大到小</label>
													<input id="ds-topn-SortOp2" type="radio" name="SortOp" value="1" />
													<label for="ds-topn-SortOp2">从小到大</label>
												</div>
											</div>
										</div>
										<div class="modal-footer">
											<button type="submit" class="modalbtn ok">确定</button>
										</div>
									</form>
								</div>
							</div>
						</div>

						<div id="dashboard-NetTraffic-add-modal" class="modal fade" tabindex="-1" role="dialog"
							aria-labelledby="myLargeModalLabel" aria-hidden="true">
							<div class="modal-dialog">
								<div class="modal-content">
									<form id="dashboard-NetTraffic-add-form" class="form-horizontal" role="form">
										<div class="modal-header">
											<button type="button" class="close" data-dismiss="modal"
												aria-hidden="true">&times;</button>
											<h4 class="modal-title">添加流量报告</h4>
										</div>
										<div class="modal-body">
											<div class="form-group" style="margin-bottom:5px">
												<label class="control-label col-sm-2" for="ds-chart-point">监测点</label>
												<div class="col-sm-10">
													<input id="ds-NetTraffic-point" class="form-control" type="text"
														name="chart_point" style="cursor:pointer" />
												</div>
											</div>
											<div class="form-group" id="div-ds-chart-time" style="margin-bottom:5px">
												<label class="control-label col-sm-2" for="ds-chart-time">时间范围</label>
												<div class="col-sm-10 control-input">
													<select id="ds-NetTraffic-time" class="form-control"
														name="chart_time">
														<option value="1">1小时</option>
														<option value="2">2小时</option>
														<option value="4">4小时</option>
														<option value="12">半天</option>
														<option value="24">1天</option>
													</select>
												</div>
											</div>
											<div class="form-group" style="margin-bottom:5px">
												<label class="control-label col-sm-2" for="ds-chart-name">名称</label>
												<div class="col-sm-10">
													<input type="text" name="chart_name" value=""
														id="ds-NetTraffic-name" class="form-control" />
												</div>
											</div>
										</div>
										<div class="modal-footer">
											<input type="hidden" name="chart_did" value="" id="ds-NetTraffic-did"
												class="form-control" />
											<input type="hidden" name="chart_mid" value="" id="ds-NetTraffic-mid"
												class="form-control" />
											<input type="hidden" name="chart_indicator1" value=""
												id="ds-NetTraffic-indicator1" class="form-control" />
											<input type="hidden" name="chart_indicator2" value=""
												id="ds-NetTraffic-indicator2" class="form-control" />
											<button type="submit" class="modalbtn ok">确定</button>
										</div>
									</form>
								</div>
							</div>
						</div>

						<div id="point-NetTraffic-modal" class="modal fade" tabindex="-1" role="dialog"
							aria-labelledby="myLargeModalLabel" aria-hidden="true">
							<div class="modal-dialog mymodal-lg">
								<div class="modal-content">
									<div class="modal-header">
										<button type="button" class="close" data-dismiss="modal"
											aria-hidden="true">&times;</button>
										<h4 class="modal-title">选择监测点</h4>
									</div>
									<div class="modal-body" style="padding:0">
										<table class="table" style="font-size: 12px;">
											<tr>
												<!-- <td class="cth" width="25%">选择组</td> -->
												<td class="cth" width="33.33%">选择管理对象</td>
												<td class="cth" width="33.33%">选择监测点</td>
												<td class="cth" width="33.33%">选择指标</td>
											</tr>
											<tr>
												<td class="con" style="overflow:hidden;padding:0px;">
													<div id="NetTraffic-groups-wrapper" class="device-tree-selector"
														style="padding:8px;height:300px;width:260px;overflow-y:scroll">
													</div>
												</td>
												<!-- <td class="con" style="overflow:hidden;padding:0px;">
							<div id="NetTraffic-devices-wrapper" style="padding:8px;height:300px;width:195px;overflow-y:scroll">
							</div>
						</td> -->
												<td class="con" style="overflow:hidden;padding:0px;">
													<div id="NetTraffic-points-wrapper"
														style="padding:8px;height:300px;width:260px;overflow-y:scroll">
													</div>
												</td>
												<td class="con" style="overflow:hidden;padding:0px;width:195px">
													<div id="NetTraffic-indicators-wrapper"
														style="padding:8px;height:300px;width:260px;overflow-y:scroll;display:none">
														<a data-indicator1="recivetraffic" data-indicator2="sendtraffic"
															href="javascript:;" class="list-group-item"
															style="border:0; padding: 5px 10px;">流量 (Kbit/s)</a>
														<a data-indicator1="inbanduse" data-indicator2="outbanduse"
															href="javascript:;" class="list-group-item"
															style="border:0; padding: 5px 10px;">带宽使用率 (%)</a>
														<a data-indicator1="receivepks" data-indicator2="sendpks"
															href="javascript:;" class="list-group-item"
															style="border:0; padding: 5px 10px;">每秒数据包 (个/s)</a>
														<a data-indicator1="recvlossrate" data-indicator2="sendlossrate"
															href="javascript:;" class="list-group-item"
															style="border:0; padding: 5px 10px;">丢包率 (%)</a>
														<a data-indicator1="recverrorrate"
															data-indicator2="senderrorrate" href="javascript:;"
															class="list-group-item"
															style="border:0; padding: 5px 10px;">错包率 (%)</a>
													</div>
												</td>
											</tr>
										</table>
									</div>
									<div class="modal-footer"></div>
								</div>
							</div>
						</div>

						<div id="dashboard-OuterWeb-add-modal" class="modal fade" tabindex="-1" role="dialog"
							aria-labelledby="myLargeModalLabel" aria-hidden="true">
							<div class="modal-dialog">
								<div class="modal-content">
									<form id="dashboard-OuterWeb-add-form" class="form-horizontal" role="form">
										<div class="modal-header">
											<button type="button" class="close" data-dismiss="modal"
												aria-hidden="true">&times;</button>
											<h4 class="modal-title">添加其他页面</h4>
										</div>
										<div class="modal-body">
											<div class="form-group" style="margin-bottom:5px">
												<label class="control-label col-sm-2" for="OuterWebName">名称</label>
												<div class="col-sm-10">
													<input id="OuterWebName" class="form-control" type="text"
														name="OuterWebName" value="10" style="" />
												</div>
											</div>
											<div class="form-group" style="margin-bottom:5px">
												<label class="control-label col-sm-2" for="OuterWebUrl">页面地址</label>
												<div class="col-sm-10">
													<input id="OuterWebUrl" class="form-control" type="text"
														name="OuterWebUrl" value="10" style="" />
												</div>
											</div>
											<div class="form-group" style="margin-bottom:5px">
												<label class="control-label col-sm-2"></label>
												<div class="col-sm-10">
													<label for="OuterWebUrl">请输入其他页面的地址。如：https://www.baidu.com</label>
												</div>
											</div>
										</div>
										<div class="modal-footer">
											<button type="submit" class="modalbtn ok">确定</button>
										</div>
									</form>
								</div>
							</div>
						</div>

						<div id="dashboard-History-add-modal" class="modal fade" tabindex="-1" role="dialog"
							aria-hidden="true">
							<div class="modal-dialog">
								<div class="modal-content">
									<form id="dashboard-History-add-form" class="form-horizontal" role="form">
										<div class="modal-header">
											<button type="button" class="close" data-dismiss="modal"
												aria-hidden="true">&times;</button>
											<h4 class="modal-title">添加历史告警</h4>
										</div>
										<div class="modal-body">
											<div class="form-group">
												<label class="control-label col-sm-2" for="topo-f-name">选择日期</label>
												<div class="col-sm-10">
													<input id="ds-warning-begintime" name="begintime"
														class="form-control input-sm form_datetime" placeholder="选择日期"
														size="16" type="text" value="" readonly />
												</div>
											</div>
											<div class="form-group">
												<label class="control-label col-sm-2">选择日期段</label>
												<div class="col-sm-10">
													<table style="font-size:12px">
														<tr style="height: 40px;">
															<td style="width:18px"><input id="ds-warning-riqiduan1"
																	type="radio" name="riqiduan" value="1"
																	checked="true" /></td>
															<td style="width:80px"><label for="ds-warning-riqiduan1"
																	style="margin: 0px;">当天</label></td>
															<td style="width:18px"><input id="ds-warning-riqiduan2"
																	type="radio" name="riqiduan" value="2" /></td>
															<td style="width:80px"><label for="ds-warning-riqiduan2"
																	style="margin: 0px;">所在周</label></td>
															<td style="width:18px"><input id="ds-warning-riqiduan3"
																	type="radio" name="riqiduan" value="3" /></td>
															<td style="width:80px"><label for="ds-warning-riqiduan3"
																	style="margin: 0px;">所在月</label></td>
														</tr>
													</table>
												</div>
											</div>
											<div class="form-group">
												<label class="control-label col-sm-2"
													style="padding-top:2px">监测点</label>
												<div class="col-sm-10">
													<div class="evice-tree-selector"
														style="max-height:200px;height:200px;border:1px solid #d2d6de;overflow:auto;border-radius:4px;padding-top:10px;">
														<div id="da-warning-GroupDevTree">
														</div>
													</div>
												</div>
											</div>
											<div class="form-group">
												<label class="control-label col-sm-2" for="topo-f-name">报告标题</label>
												<div class="col-sm-10">
													<input id="ds-warning-title" class="form-control input-sm" size="16"
														type="text" />
												</div>
											</div>
										</div>
										<div class="modal-footer">
											<button type="submit" class="modalbtn ok">确定</button>
											<button type="button" class="modalbtn cancel"
												data-dismiss="modal">取消</button>
										</div>
									</form>
								</div>
							</div>
						</div>



						<div id="dashboard-widget-addbtngrp-modal" class="modal fade" tabindex="-1" role="dialog"
							aria-hidden="true">
							<div class="modal-dialog modal-sm">
								<div class="modal-content">
									<form id="add-group-form" class="form-horizontal" role="form">
										<div class="modal-header" style="background: #fff;border-radius:4px;">
											<button type="button" class="close" data-dismiss="modal"
												aria-hidden="true">&times;</button>
											<h4 class="modal-title">添加图表</h4>
										</div>
										<div class="modal-body">
											<div style="margin-right: 10px;">
												<button data-tag="widget-add" type="button"
													class="btn btn-primary btn-block"
													style="height:40px;border-bottom:1px solid #dbdbdb;margin-top:0px;border-radius:4px 4px 0px 0px;">添加视图</button>
												<button data-tag="chart-add" type="button"
													class="btn btn-primary btn-block"
													style="height:40px;border-bottom:1px solid #dbdbdb;margin-top:0px;border-radius:0px;">添加图表</button>
												<button data-tag="NetTraffic-add" type="button"
													class="btn btn-primary btn-block"
													style="height:40px;border-bottom:1px solid #dbdbdb;margin-top:0px;border-radius:0px;">添加流量报表</button>
												<button data-tag="TopN-add" type="button"
													class="btn btn-primary btn-block"
													style="height:40px;border-bottom:1px solid #dbdbdb;margin-top:0px;border-radius:0px;">添加TopN报表</button>
												<button data-tag="History-add" type="button"
													class="btn btn-primary btn-block"
													style="height:40px;border-bottom:1px solid #dbdbdb;margin-top:0px;border-radius:0px;">添加历史告警</button>
												<button data-tag="OuterWeb-add" type="button"
													class="btn btn-primary btn-block"
													style="height:40px;margin-top:0px;border-radius:0px 0px 4px 4px;">添加外部页面</button>
											</div>
										</div>
									</form>

								</div>
							</div>
						</div>

						<div id="dashboard-widget-addpage-modal" class="modal fade bs-modal-lg" tabindex="-1"
							role="dialog" aria-labelledby="myLargeModalLabel" aria-hidden="true">
							<div class="modal-dialog">
								<div class="modal-content">
									<form id="dashboard-widget-addpage-form" class="form-horizontal" role="form">
										<div class="modal-header">
											<button type="button" class="close" data-dismiss="modal"
												aria-hidden="true">&times;</button>
											<h4 class="modal-title">添加页面</h4>
										</div>
										<div class="modal-body">
											<div class="form-group" style="margin-bottom:5px">
												<label class="control-label col-sm-2"
													for="ds-widget-pagename">页面名称</label>
												<div class="col-sm-10">
													<input type="text" name="page_name" value="" id="ds-widget-pagename"
														class="form-control" />
												</div>
											</div>
											<div class="form-group" style="margin-bottom:5px">
												<label class="control-label col-sm-2"></label>
												<div class="col-sm-10">
													<table style="font-size:12px">
														<tr>
															<td><input type="checkbox" name="isshowname" value="1"
																	id="ds-widget-isshowname"
																	style="margin:0 5px 0 0" /></td>
															<td><label for="ds-widget-isshowname"
																	style="margin:0">全屏时候是否显示页面名称</label></td>
														</tr>
													</table>
												</div>
											</div>
											<div class="form-group has-feedback" style="margin-bottom:5px">
												<label class="control-label col-sm-2"
													for="ds-widget-refresh-f">刷新频率</label>
												<div class="col-sm-10">
													<div class="input-group">
														<input type="text" name="page_refresh_frequency" value="1"
															id="ds-widget-refresh-f" class="form-control" />
														<span class="input-group-addon">分钟</span>
													</div>
												</div>
											</div>

											<div class="form-group" style="margin-bottom:5px">
												<div class="col-sm-offset-2 col-sm-10">
													<div class="checkbox">
														<label style="margin-bottom:0px">
															<input name="color_ornot" type="checkbox" value="1"
																style="margin-top: 2px;"
																onclick="javascript:if(this.checked){$('#page-add-bg-color,#page-add-text-color,#page-add-bgimg-color').show();}else{$('#page-add-bg-color,#page-add-text-color,#page-add-bgimg-color').hide();}" />
															设置文字颜色
														</label>
													</div>
												</div>
											</div>
											<div class="form-group" id="page-add-text-color"
												style="margin-bottom:5px;display:none">
												<label class="control-label col-sm-2" for="ds-chart-color">文字颜色</label>
												<div class="col-sm-10">
													<div class="bfh-colorpicker" data-name="textcolor"
														style="cursor:pointer">
													</div>
												</div>
											</div>
											<!-- <div class="form-group" id="page-add-bg-color"
												style="margin-bottom:5px;display:none">
												<label class="control-label col-sm-2" for="ds-chart-color">背景颜色</label>
												<div class="col-sm-10">
													<div class="bfh-colorpicker" data-name="bgcolor"
														style="cursor:pointer">
													</div>
												</div>
											</div> -->
											<div class="form-group" id="page-add-bgimg-color"
												style="margin-bottom:5px;display:none">
												<label class="control-label col-sm-2" for="ds-chart-color">背景图片</label>
												<div class="col-sm-10">
													<div class="back_imgCheck">
														<div>
															<img src="/images/background.jpg" alt="">
															<input type="radio" name="backImg" value='1'>
														</div>
														<div>
															<img src="/images/bg3.jpg" alt="">
															<input type="radio" name="backImg" value='2'>
														</div>
														<div>
															无背景图片
															<img src="/images/bgrgba.png" alt="">
															<input type="radio" name="backImg" value='3'>
														</div>
													</div>
												</div>
											</div>
											<div class="form-group" style="margin-bottom:5px">
												<label class="control-label col-sm-2"
													for="ds-widget-description">描述</label>
												<div class="col-sm-10">
													<textarea id="ds-widget-description" name="page_description"
														class="form-control" rows="3"
														style="min-width:450px;max-width:450px;min-height:50px;max-height:50px"></textarea>
												</div>
											</div>
										</div>
										<div class="modal-footer">
											<button type="submit" class="btn btn-default ok">确定</button>
											<button type="button" class="btn btn-default"
												data-dismiss="modal">取消</button>
										</div>
									</form>
								</div>
							</div>
						</div>

						<div id="dashboard-widget-editpage-modal" class="modal fade bs-modal-lg" tabindex="-1"
							role="dialog" aria-labelledby="myLargeModalLabel" aria-hidden="true">
							<div class="modal-dialog">
								<div class="modal-content">
									<form id="dashboard-widget-editpage-form" class="form-horizontal" role="form">
										<div class="modal-header">
											<button type="button" class="close" data-dismiss="modal"
												aria-hidden="true">&times;</button>
											<h4 class="modal-title">编辑页面</h4>
										</div>
										<div class="modal-body">
											<div class="form-group" style="margin-bottom:5px">
												<label class="control-label col-sm-2"
													for="ds-widget-pagename">页面名称</label>
												<div class="col-sm-10">
													<input type="text" name="page_name" value="默认页面"
														id="ds-widget-pagename-edit" class="form-control" />
												</div>
											</div>
											<div class="form-group" style="margin-bottom:5px">
												<label class="control-label col-sm-2"></label>
												<div class="col-sm-10">
													<table style="font-size:12px">
														<tr>
															<td><input type="checkbox" name="isshowname" value="1"
																	id="ds-widget-isshowname-edit"
																	style="margin:0 5px 0 0" /></td>
															<td><label for="ds-widget-isshowname-edit"
																	style="margin:0">全屏时候是否显示页面名称</label></td>
														</tr>
													</table>
												</div>
											</div>
											<div class="form-group has-feedback" style="margin-bottom:5px">
												<label class="control-label col-sm-2"
													for="ds-widget-refresh-f">刷新频率</label>
												<div class="col-sm-10">
													<div class="input-group">
														<input type="text" name="page_refresh_frequency" value="1"
															id="ds-widget-refresh-f" class="form-control" />
														<span class="input-group-addon">分钟</span>
													</div>
												</div>
											</div>
											<div class="form-group" style="margin-bottom:5px">
												<div class="col-sm-offset-2 col-sm-10">
													<div class="checkbox">
														<label style="margin-bottom:0px">
															<input name="color_ornot" type="checkbox" value="1"
																style="margin-top: 2px;"
																onclick="javascript:if(this.checked){$('#page-edit-bg-color,#page-edit-text-color,#page-edit-bgimg-color').show();}else{$('#page-edit-bg-color,#page-edit-text-color,#page-edit-bgimg-color').hide();}" />
															设置背景与文字颜色
														</label>
													</div>
												</div>
											</div>
											<div class="form-group" id="page-edit-text-color"
												style="margin-bottom:5px;display:none">
												<label class="control-label col-sm-2" for="ds-chart-color">文字颜色</label>
												<div class="col-sm-10">
													<div class="bfh-colorpicker" data-name="textcolor"
														style="cursor:pointer">
													</div>
												</div>
											</div>
											<!-- <div class="form-group" id="page-edit-bg-color"
												style="margin-bottom:5px;display:none">
												<label class="control-label col-sm-2" for="ds-chart-color">背景颜色</label>
												<div class="col-sm-10">
													<div class="bfh-colorpicker" data-name="bgcolor"
														style="cursor:pointer">
													</div>
												</div>
											</div> -->
											<div class="form-group" id="page-edit-bgimg-color"
												style="margin-bottom:5px;display:none">
												<label class="control-label col-sm-2" for="ds-chart-color">背景图片</label>
												<div class="col-sm-10">
													<div class="back_imgCheck">
														<div class="back_img">
															<img src="/images/background.jpg" alt="">
															<input type="radio" name="backImg" value='1'>
														</div>
														<div class="back_img">
															<img src="/images/bg3.jpg" alt="">
															<input type="radio" name="backImg" value='2'>
														</div>
														<div>
															无背景图片
															<img src="/images/bgrgba.png" alt="">
															<input type="radio" name="backImg" value='3'>
														</div>
													</div>
												</div>
											</div>

											<div class="form-group" style="margin-bottom:5px">
												<label class="control-label col-sm-2"
													for="ds-widget-description">描述</label>
												<div class="col-sm-10">
													<textarea id="ds-widget-description" name="page_description"
														class="form-control" rows="3"
														style="min-width:450px;max-width:450px;min-height:50px;max-height:50px">  </textarea>
												</div>
											</div>
										</div>
										<div class="modal-footer">
											<button type="submit" class="btn btn-default ok">确定</button>
											<button type="button" class="btn btn-default"
												data-dismiss="modal">取消</button>
										</div>
									</form>
								</div>
							</div>
						</div>

						<div id="point-select-modal" class="modal fade" tabindex="-1" role="dialog"
							aria-labelledby="myLargeModalLabel" aria-hidden="true">
							<div class="modal-dialog mymodal-lg">
								<div class="modal-content">
									<div class="modal-header">
										<button type="button" class="close" data-dismiss="modal"
											aria-hidden="true">&times;</button>
										<h4 class="modal-title">选择监测点</h4>
									</div>
									<div class="modal-body">
										<table class="table" style="font-size: 12px;">
											<tr>
												<td class="cth" width="33.33%">选择组</td>
												<!-- <td class="cth" width="25%">选择管理对象</td> -->
												<td class="cth" width="33.33%">选择监测点</td>
												<td class="cth" width="33.33%">选择指标</td>
											</tr>
											<tr>
												<td class="con" style="overflow:hidden">
													<!-- <div id="groups-wrapper" class="device-tree-selector" style="padding:8px;height:300px;width:195px;overflow-y:scroll"> -->
													<div id="groups-wrapper" class="devicetree"
														style="padding:8px;height:300px;width:260px;overflow-y:scroll">
													</div>
												</td>
												<td class="con" style="overflow:hidden">
													<div id="points-wrapper"
														style="padding:8px;height:300px;width:260px;overflow-y:scroll">
													</div>
												</td>
												<td class="con" style="overflow:hidden">
													<div id="indicators-wrapper"
														style="padding:8px;height:300px;width:260px;overflow-y:scroll;">
													</div>
												</td>
											</tr>
										</table>
									</div>
									<div class="modal-footer"></div>
								</div>
							</div>
						</div>


						<div id="dashboard-widget-lunbo-modal" class="modal fade bs-modal-lg" tabindex="-1"
							role="dialog" aria-labelledby="myLargeModalLabel" aria-hidden="true">
							<div class="modal-dialog">
								<div class="modal-content">
									<form id="dashboard-widget-lunbo-form" class="form-horizontal" role="form">
										<div class="modal-header">
											<button type="button" class="close" data-dismiss="modal"
												aria-hidden="true">&times;</button>
											<h4 class="modal-title">轮播设置</h4>
										</div>
										<div class="modal-body">
											<div class="form-group has-feedback" style="margin-bottom:5px">
												<label class="control-label col-sm-2"
													for="ds-widget-refresh-lunbo">轮播频率</label>
												<div class="col-sm-10">
													<div class="input-group">
														<input type="text" name="frequency" value="5"
															id="ds-widget-refresh-lunbo" class="form-control" />
														<span class="input-group-addon">秒</span>
													</div>
												</div>
											</div>
										</div>
										<div class="modal-footer">
											<button type="submit" class="btn btn-default ok">确定</button>
											<button type="button" class="btn btn-default"
												data-dismiss="modal">取消</button>
										</div>
									</form>
								</div>
							</div>
						</div>

						<div id="warning-remark-modal" class="modal fade" tabindex="-1" role="dialog"
							aria-hidden="true">
							<div class="modal-dialog">
								<div class="modal-content">
									<form id="warning-remark-form" class="form-horizontal" role="form">
										<div class="modal-header">
											<button type="button" class="close" data-dismiss="modal"
												aria-hidden="true">&times;</button>
											<h4 class="modal-title">备注</h4>
										</div>
										<div class="modal-body">
											<div class="form-group">
												<label class="control-label col-sm-2" for="topo-f-name">当前备注</label>
												<div class="col-sm-10">
													<textarea class="form-control input-sm" name="nowcomment"
														readonly></textarea>
												</div>
											</div>
											<div class="form-group">
												<label class="control-label col-sm-2" for="topo-f-name">追加内容</label>
												<div class="col-sm-10">
													<textarea class="form-control input-sm" name="comment"></textarea>
												</div>
											</div>
										</div>
										<div class="modal-footer">
											<button type="submit" class="btn btn-default ok">确定</button>
											<button type="button" class="btn btn-default"
												data-dismiss="modal">取消</button>
										</div>
									</form>
								</div>
							</div>
						</div>

						<!-- InstanceEndEditable -->
					</div>
				</div>
			</section><!-- /.content -->
		</div><!-- /.content-wrapper -->

		<!-- Add the sidebar's background. This div must be placed
		   immediately after the control sidebar -->
		<div class="control-sidebar-bg"></div>
	</div><!-- ./wrapper -->

	<!-- jQuery 2.1.4 -->
	<!--<script src="/bundles/src/js.js"></script>-->
	<script src="/symbols/plugin/G6SAfVAgIWRD.js"></script>
	<script src="/symbols/plugin/S3jFdENDtP6n.js"></script> 
	<script src="/symbols/plugin/ht.js"></script> 
	<script src="/symbols/plugin/product_generated.js"></script> 
    <script src="/symbols/plugin/ht-form.js"></script> 
    <script src="/symbols/plugin/ht-cssanimation.js"></script> 
    <script src="/symbols/plugin/ht-palette.js"></script>
    <script src="/symbols/plugin/ht-quickfinder.js"></script>
	<script src="/symbols/plugin/ht-flow.js"></script> 
    <script src="/symbols/plugin/ht-edgetype.js"></script>
    <script src="/symbols/plugin/ht-dialog.js"></script>
	
	<script src="/symbols/plugin/ht-autolayout.js"></script>
	<script src="/symbols/plugin/ht-forcelayout.js"></script>
	
	<script type="text/javascript" src="/bundles/jquery/js/jquery.slimscroll.min.js"></script>
	<script type="text/javascript" src="/bundles/jquery/js/jquery.fullscreen.js"></script>
	<script type="text/javascript" src="/bundles/jquery/js/jquery.alerts.js"></script>
	<script type="text/javascript" src="/bundles/jquery/js/jquery.colorpicker.js"></script>
	<script type="text/javascript" src="/bundles/jquery/js/jquery.cookie.js"></script>
	<script type="text/javascript" src="/bundles/jquery/js/jquery.fullscreen.js"></script>
	<script type="text/javascript" src="/bundles/jquery/js/jquery.gridster.js"></script>
	<script type="text/javascript" src="/bundles/jquery/js/jquery.jstree.min.js"></script>
	<script type="text/javascript" src="/bundles/jquery/js/jquery-ui.min.js"></script>
	<!-- Bootstrap 3.3.5 -->
	<script type="text/javascript" src="/bundles/bootstrap/js/bootstrap.min.js"></script>
	<script type="text/javascript" src="/bundles/bootstrap/js/bootstrap-datetimepicker.min.js"></script>
	<script type="text/javascript" src="/bundles/bootstrap/js/bootstrap-datetimepicker.zh-CN.js"></script>
	<!-- AdminLTE App -->
	<script type="text/javascript" src="/bundles/AdminLTE/js/app.min.js"></script>

	<script type="text/javascript" src="/bundles/jquery/js/json2.js"></script>
	<script type="text/javascript" src="/bundles/gojs/js/go.js"></script>
	<script type="text/javascript" src="/bundles/highcharts/highcharts.js"></script>
	<script type="text/javascript" src="/bundles/highcharts/highcharts-more.js"></script>
	<!-- 需要引用echarts3 -->
	<script type="text/javascript" src="/bundles/echarts/echarts3.min.js"></script>
	<script type="text/javascript" src="/bundles/echarts/china.js"></script>
	<script type="text/javascript" src="/bundles/echarts/provinces.js"></script>
	<script type="text/javascript" src="/bundles/echarts/citymap.js"></script>

	<script type="text/javascript" src="/js/base.js"></script>
	<script type="text/javascript" src="/js/base_menu.js"></script>
	<!-- InstanceBeginEditable name="JsRegion" -->
	<!-- start: JavaScript-->
	
		
	<script type="text/javascript" src="js/RGraph.common.core.js"></script>
	<script type="text/javascript" src="js/RGraph.gauge.js"></script>

	<script type="text/javascript" src="js/myApple.js"></script>
	<script type="text/javascript" src="js/myStatus_dns.js"></script>
	<script type="text/javascript" src="js/myMonitor.js"></script>
	<script type="text/javascript" src="js/myWarning_dns.js"></script>
	<script type="text/javascript" src="js/myVisio.js"></script>
	<script type="text/javascript" src="js/myTopo.js"></script>
	<script type="text/javascript" src="js/myZoom.js"></script>

	<script type="text/javascript" src="js/index_dns.js"></script>

	<script type="text/javascript" charset="utf-8">
		// var skinTxtColor=window.sessionStorage.getItem('skinColor');
		var skinTxtColor = '#fff';
		var skinScon = window.sessionStorage.getItem('skinScon');
		var IntervalTime = 100 * 1000;
		var timeoutID = 0;
		var isRefresh = false;
		var sconColor = '#fff';
		if (skinScon == 'white') {
			sconColor = '#ddd';
		} else {
			sconColor = '#fff';
		}

		$(function () {
			//权限设置
			hideop('index.html');
			//setActivePage('index_device.html');
			checkHasTs();
			
		})
		function goPageGroup(){
			if($('#isOneShow').is(':checked')){
				myGet(bsiurl + '/closeshowfist.bsi', function (json) {
					if (json.status == 'success') {
						location.href = 'groupmanage.html';
						window.sessionStorage.removeItem('showfirst');
					} else {
						jAlert('<h4>不在提示出错</h4>');
					}
				})
			}else{
				location.href = 'groupmanage.html';
				window.sessionStorage.removeItem('showfirst');
			}
		}
		function goPageWarring(){
			if($('#isOneShow').is(':checked')){
				myGet(bsiurl + '/closeshowfist.bsi', function (json) {
					if (json.status == 'success') {
						location.href = 'warningset.html';
						window.sessionStorage.removeItem('showfirst');
					} else {
						jAlert('<h4>不在提示出错</h4>');
					}
				})
			}else{
				location.href = 'warningset.html';
				window.sessionStorage.removeItem('showfirst');
			}
		}
		
		var url = bsiurl + "/page.bsi?encoding=utf-8";
		function aMenuClick(obj, id, gid) {
			window.sessionStorage.removeItem('cur_pageid');
			//先清除chart，取消内存泄漏
			while (oldCharts.length > 0) {
				try {
					var chart = oldCharts.pop();
					chart.highcharts().destroy();
					delete chart;
					chart = {};
				} catch (ex) {
					console.log(ex);
				}
			}

			$('#gloabal-widget-refresh').data('target', id);
			var color_ornot = $(obj).data('color_ornot');
			var pagecolor = $(obj).data('pagecolor');
			if (Math.floor(color_ornot) == 1) {
				var colorar = pagecolor.split(',');
				if ($.isArray(colorar)) {
					if (colorar.length > 1) {
						textColor = colorar[0];
						bgColor = colorar[1];
					} else {
						textColor = skinTxtColor;
						bgColor = colorar[0];
					}
				}
				if (bgColor && bgColor.indexOf('#') == -1) {
					var bgColorZ = 'url(' + bgColor + ') 0 0 /100% 100% no-repeat !important';
					$('#dashboard-widget-editpage-form input[name="bgcolor"]').val('');
					$('#dashboard-widget-editpage-form #page-edit-bg-color span.bfh-colorpicker-icon').css('background', '#fff');
					$('.gridster').css({ 'background': '', 'color': textColor });
					$('.fullscreenable').css('cssText', 'background: ' + bgColorZ + '');
					var img_backNum = $("#dashboard-widget-editpage-form").find('.back_imgCheck');
					var arrO = $('.back_img');
					arrO.eq(2).addClass("act").siblings().removeClass("act");
					arrO.eq(2).find("input").attr("checked", "checked");
					for (var j = 0; j < $('.back_img').length; j++) {
						if (arrO.eq(j).find("img").attr("src") == bgColor) {
							arrO.eq(j).addClass("act").siblings().removeClass("act");
							arrO.eq(j).find("input").attr("checked", "checked");

						}
					}

				}
				else {
					$('#dashboard-widget-editpage-form input[name="bgcolor"]').val(bgColor);
					$('#dashboard-widget-editpage-form #page-edit-bg-color span.bfh-colorpicker-icon').css('background', bgColor);
					$('.gridster').css({ 'background': bgColor, 'color': textColor });
					$('.fullscreenable').css('cssText', 'background:' + bgColor + '!important');
				}


				$('#dashboard-widget-editpage-form input[name="color_ornot"]').get(0).checked = true;
				$('#dashboard-widget-editpage-form #page-edit-text-color').show();
				$('#dashboard-widget-editpage-form #page-edit-bg-color').show();
				$('#dashboard-widget-editpage-form #page-edit-bgimg-color').show();

				$('#dashboard-widget-editpage-form input[name="textcolor"]').val(textColor);

				$('#dashboard-widget-editpage-form #page-edit-text-color span.bfh-colorpicker-icon').css('background-color', textColor);

			} else {
				$('.gridster').css({ 'background-color': '', 'color': '' });
				$('.fullscreenable').css('background', '');
				$('#dashboard-widget-editpage-form input[name="color_ornot"]').get(0).checked = false;
				$('#dashboard-widget-editpage-form #page-edit-text-color').hide();
				$('#dashboard-widget-editpage-form #page-edit-bg-color').hide();
				$('#dashboard-widget-editpage-form #page-edit-bgimg-color').hide();
				$('#dashboard-widget-editpage-form input[name="textcolor"]').val('');
				$('#dashboard-widget-editpage-form input[name="bgcolor"]').val('');
				$('#dashboard-widget-editpage-form span.bfh-colorpicker-icon').css('background-color', '#fff');
				textColor = skinTxtColor;
				bgColor = '#fff'
			}
			var namestr = $(obj).text();
			var frequency = $(obj).data("frequency");
			if (!frequency || isNaN(frequency) || frequency == '')
				frequency = 10;
			var isshowname = $(obj).data("isshowname");
			var description = $(obj).data("description");
			$('div.pagename-list div.pagename-header a').text(namestr);
			$("#dashboard-widget-editpage-form #ds-widget-pagename-edit").val(namestr);
			$("#dashboard-widget-editpage-form #ds-widget-refresh-f").val(frequency);
			if (isshowname == '1') {
				$("#dashboard-widget-editpage-form #ds-widget-isshowname-edit").get(0).checked = true;
				//如果设置显示名称了，这里才显示
				$("#fullscreen-header h3").text("- " + namestr);
			} else {
				$("#dashboard-widget-editpage-form #ds-widget-isshowname-edit").get(0).checked = false;
				$("#fullscreen-header h3").text('');
			}
			$("#dashboard-widget-editpage-form #ds-widget-description").val(description);
			$('#page-id-group').val(gid);
			$("#page-id-storage").val(id);
			initGrid();
			myGet(url, "id=" + encodeURI(id), function (json) {
				if (json) {
					json = json.sort(function (a1, a2) {
						if (a1.y < a2.y)
							return -1;
						else if (a1.y == a2.y && a1.x < a2.x)
							return -1;
						else
							return 1;
					});
					for (var i = 0; i < json.length; i++) {
						var vtype = '';
						try {
							vtype = Math.floor(json[i].vtype);
							if (vtype == 999) continue;
						}
						catch (e) {
							continue;
						}


						var str = '<li class="das" data-vtype="' + json[i].vtype + '" ';
						if (json[i].did)
							str += 'data-did="' + json[i].did + '" ';
						if (json[i].mid)
							str += 'data-mid="' + json[i].mid + '" ';
						if (json[i].indicator)
							str += 'data-indicator="' + json[i].indicator + '" ';
						if (json[i].timerange)
							str += 'data-timerange="' + json[i].timerange + '" ';

						if (json[i].title)
							str += 'data-title="' + json[i].title + '" ';
						else
							str += 'data-title="" ';
						if (json[i].dtype)
							str += 'data-dtype="' + json[i].dtype + '" ';
						else
							str += 'data-dtype="1" ';
						if (json[i].color)
							str += 'data-color="' + json[i].color + '" ';
						else
							str += 'data-color="#000000" ';
						if(json[i].hasOwnProperty('extra') && json[i].extra != ''){
							var nowextra = JSON.parse(json[i].extra);
							str += 'data-showtraffic="' + nowextra.showtraffic + '" ';
							str += 'data-statshowtype="' + nowextra.statshowtype + '" ';
						}
						/*if(json[i].hasOwnProperty('showtraffic')){
							str += 'data-showtraffic="' + json[i].showtraffic + '" ';
						}
						if(json[i].hasOwnProperty('statshowtype')){
							str += 'data-statshowtype="' + json[i].statshowtype + '" ';
						}*/
						//str += ' data-sizex="' + json[i].w + '" data-sizey="' + json[i].h + '"'
						//	+ ' data-col="' + json[i].x + '" data-row="' + json[i].y + '"';
						str += '>';
						if (json[i].title)
							str += '<h5>&nbsp;' + json[i].title + '</h5>';
						else
							str += '<h5>&nbsp;</h5>';
						str += '<a href="javascript:;" class="gs-close"><i class="fa fa-times" style="color:' + sconColor + '"></i></a>'
							+ '<a href="javascript:;" class="gs-edit"><i style="color:' + sconColor + '" class="fa fa-pencil"></i></a>'
							+ '<a href="javascript:;" class="gs-refresh"><i style="color:' + sconColor + '" class="fa fa-refresh"></i></a>'
							+ '<div style="padding: 0px 15px 0 5px; text-align: center; width: 100%;height: 98%; overflow:hidden;">'
							+ '<div id="chartId" style="width: 100%;height: 98%;"></div></div>'
							+ '</li>';
						//.add_widget( html, [size_x], [size_y], [col], [row] )
						var a = gridster.add_widget(str, json[i].w * 1, json[i].h * 1, json[i].x * 1, json[i].y * 1);
					}

					IntervalTime = frequency * 60 * 1000;
					isRefresh = false;
					//LoadWidgetView();
					RefreshWidgetView();
					var isShow = $('#dashboard-widget-show-hide').data('isshow');
					if (!!isShow) {
						enable_edit();
					} else {
						disable_edit();
					}
				}
				else {
					alert("获取数据出错，请联系我们。");
				}
			});
		}

		function RefreshWidgetView() {
			if (timeoutID != 0) {
				clearTimeout(timeoutID);
			}
			if (!bIsInLunbo) {
				LoadWidgetView();
			}
			timeoutID = window.setTimeout(RefreshWidgetView, IntervalTime);
		}



		var lb_IntervalTime = 5 * 1000;
		var lb_timeoutID = 0;
		var bIsInLunbo = false;
		function lunBo() {
//			if (lb_timeoutID == 0) {
//				$('#gloabal-widget-fullscreen').click();
//			} else {
				//切换页面
				var cl = $("div.pagename-list div.pagename-content").children();
				if (cl.length > 0) {
					var j = 0;
					for (var i = 0; i < cl.length; i++) {
						if ($(cl[i]).text() == $('div.pagename-list div.pagename-header a').text()) {
							j = i + 1;
							if (j >= cl.length) j = 0;
							break;
						}
					}
					cl[j].click();
					var pageid = $(cl[j]).data('id');
					window.sessionStorage.setItem('lb_IntervalTime', lb_IntervalTime);
					window.sessionStorage.setItem('cur_pageid', $("#page-id-storage").val());
//					$('.fullscreenable').hide();
					self.location.href = 'index_refresh.html?' + pageid;
				}
//			}
			lb_timeoutID = window.setTimeout(lunBo, lb_IntervalTime);
			bIsInLunbo = true;
		};

		$(document).ready(function () {
			displayHelp();

			inti_all_tree_device(true, $('.devicetree'), 9999);

			$('.devicetree').on('changed.jstree', function (node, action, selected, event) {
				var div = $('#add-report-modal');
				if (div.is(':hidden')) {
					div = $('#edit-report-modal');
				}
				GetMonitorList(div);
			});




			$('.form_datetime').datetimepicker({
				language: 'zh-CN',
				weekStart: 1,
				todayBtn: true,
				autoclose: true,
				todayHighlight: true,
				startView: 2,
				minView: 2,
				forceParse: false,
				showMeridian: false,
				format: 'yyyy-mm-dd',
				pickerPosition: 'bottom-left'
			});

			try {
				myGet(bsiurl + "/gettreePage.bsi?encoding=utf-8", function (json) {
					var str = "";
					if (json && isArray(json)) {
						for (i = 0; i < json.length; i++) {
							str = str + '<option value="' + json[i].rowid + '">' + json[i].name + '</option>';
						}
					}
					$('#ds-widget-appletree-id').append(str);
					$('#ds-widget-edit-appletree-id').append(str);
				});
				myGet(bsiurl + "/getmonitorlistPage.bsi?encoding=utf-8", function (json) {
					var str = "";
					if (json && isArray(json)) {
						for (i = 0; i < json.length; i++) {
							str = str + '<option value="' + json[i].rowid + '">' + json[i].name + '</option>';
						}
					}
					$('#ds-widget-monitor-id').append(str);
					$('#ds-widget-edit-monitor-id').append(str);
				});
				myGet(bsiurl + "/statisticPage.bsi?encoding=utf-8", function (json) {
					var str = "";
					if (json && isArray(json)) {
						for (i = 0; i < json.length; i++) {
							str = str + '<option value="' + json[i].rowid + '">' + json[i].name + '</option>';
							$('#ds-widget-param-id').val(json[0].rowid);
						}
					}
					$('#ds-widget-status-id').append(str);
					$('#ds-widget-edit-status-id').append(str);
				});
				myGet(bsiurl + "/alerteventPage.bsi?encoding=utf-8", function (json) {
					var str = "";
					if (json && isArray(json)) {
						for (i = 0; i < json.length; i++) {
							str = str + '<option value="' + json[i].rowid + '">' + json[i].name + '</option>';
						}
					}
					$('#ds-widget-warning-id').append(str);
					$('#ds-widget-edit-warning-id').append(str);
				});
				myGet(bsiurl + "/visio.bsi?encoding=utf-8", function (json) {
					var str = "";
					if (json.data && isArray(json.data)) {
						for (i = 0; i < json.data.length; i++) {
							str = str + '<option value="' + json.data[i].id + '">' + json.data[i].name + '</option>';
						}
					}
					$('#ds-widget-visio-id').append(str);
					$('#ds-widget-edit-visio-id').append(str);
				});
				myGet(bsiurl + "/topo.bsi?topo_type=2&encoding=utf-8", function (json) {
					var str = "";
					if (json.data && isArray(json.data)) {
						for (i = 0; i < json.data.length; i++) {
							str = str + '<option value="' + json.data[i].id + '" data-showtraffic="'+ json.data[i].showtraffic +'" data-statshowtype="'+ json.data[i].statshowtype +'">' + json.data[i].name + '</option>';
						}
					}
					$('#ds-widget-topo-id').append(str);
					$('#ds-widget-edit-topo-id').append(str);
				});
				// 链路图
				var sycsurl = bsiurl + "/bsFlowMapSetting.bsi?encoding=utf-8";
				$('#ds-widget-sycs-id').html('');
				$('#ds-widget-edit-sycs-id').html('');
				myGet(sycsurl, '&optype=0', function (json) {
					var str = "";
					if (json.data && isArray(json.data)) {
						if(json.data.length>0){
							for (i = 0; i < json.data.length; i++) {
								str = str + '<option value="' + json.data[i].flowmapid +'">' + json.data[i].name + '</option>';
							}
						}else{
							str = '';
						}
					}
					$('#ds-widget-sycs-id').append(str);
					$('#ds-widget-edit-sycs-id').append(str);
				})

				$('#dashboard-widget-add-form').submit(function () {
					var title = $('#ds-widget-name').val();
					var vtype = $('#ds-widget-type').val();
					if (vtype == 7) {
						var visiotype = $('#ds-widget-visio-id').val();
						if (visiotype == null) {
							jAlert('<h4>Visio图不能为空。</h4>');
							return false;
						}
					}
					$('#dashboard-widget-add-modal').modal('hide');
					var mid = 0;
					mid = $('#ds-widget-param-id').val();
					var wrapper = '';
					if(vtype == "8"){
						var options = $('#ds-widget-topo-id  option:selected');
						var showtraffic = options.data('showtraffic');
						var statshowtype = options.data('statshowtype');
						//获取时间戳
						var timestamp=new Date().getTime();
						wrapper = $('<li data-title="' + title + '" data-vtype="' + vtype + '" data-dtype=""'
						+ ' data-color="" data-timerange=""'
						+ ' data-mid="' + mid + '" data-indicator="" data-timestamp="'+timestamp+'" data-showtraffic="'+showtraffic+'" data-statshowtype="'+statshowtype+'"></li>');
					}else{
						wrapper = $('<li data-title="' + title + '" data-vtype="' + vtype + '" data-dtype=""'
						+ ' data-color="" data-timerange=""'
						+ ' data-mid="' + mid + '" data-indicator=""></li>');
					}

					wrapper.append('<h5>&nbsp;' + title + '</h5>'
						+ '<a href="javascript:;" class="gs-edit" style="display: inline;"><i style="color:' + sconColor + '" class="fa fa-pencil"></i></a>'
						+ '<a href="javascript:;" class="gs-close" style="display: inline;"><i style="color:' + sconColor + '" class="fa fa-times"></i></a>'
						+ '<a href="javascript:;" class="gs-refresh"><i style="color:' + sconColor + '" class="fa fa-refresh"></i></a>'
						// + '<div style="padding: 0px 15px 0 5px; text-align: center;">'
						+ '<div id="chartId" style="width: 98%;height: 98%;"></div></div>');

					gridster.add_widget(wrapper, 10, 7);
					init_widget(wrapper);
					displayHelp();
					return false;
				});

				$('#dashboard-widget-edit-form').submit(function () {
					var mid = 0;
					mid = $('#ds-widget-edit-param-id').val();
					var liObj = $('#dashboard-widget-edit-modal').data('tagObj');
					$('#dashboard-widget-edit-modal').modal('hide');
					var title = $('#ds-widget-edit-name').val();
					var vtype = $('#ds-widget-edit-type').val();
					
					if(vtype == "8"){
						var options = $('#ds-widget-edit-topo-id  option:selected');
						var showtraffic = options.data('showtraffic');
						var statshowtype = options.data('statshowtype');
						liObj.data('showtraffic', showtraffic);
						liObj.data('statshowtype', statshowtype);
						var timestamp = $('#ds-widget-edit-param-id').data('timestamp');
						liObj.data('timestamp', timestamp);
					}
					
					liObj.data('title', title);
					liObj.data('vtype', vtype);
					liObj.data('mid', mid);

					liObj.find('h5').text(title);
					liObj.find('div').remove();
					liObj.append('<div style="padding: 0px 15px 0 5px; text-align: center;">'
						+ '<div id="chartId" style="width: 98%;height: 98%;"></div></div>');

					init_widget(liObj);

					displayHelp();
					return false;
				});

				$('#ds-display-title-ornot').click(function () {
					if ($(this).prop('checked')) {
						$('#ds-widget-name-input').show();
					} else {
						$('#ds-widget-name-input').hide();
						$('#ds-widget-name').val('');
					}
				});
				$('#ds-edit-display-title-ornot').click(function () {
					if ($(this).prop('checked')) {
						$('#ds-widget-edit-name-input').show();
					} else {
						$('#ds-widget-edit-name-input').hide();
						$('#ds-widget-edit-name').val('');
					}
				});

				$('#ds-widget-type').change(function () {
					$('#dashboard-widget-add-form .input-init-hide').hide();
					var tp = $('#ds-widget-type').val();
					if (tp == 1) {
						$('#ds-widget-appletree').show();
						$('#ds-widget-param-id').val($('#ds-widget-appletree-id').val());
					}
					else if (tp == 2) {
						$('#ds-widget-monitor').show();
						$('#ds-widget-param-id').val($('#ds-widget-monitor-id').val());
					}
					else if (tp == 3) {
						$('#ds-widget-monitor').show();
						$('#ds-widget-param-id').val($('#ds-widget-monitor-id').val());
					}
					else if (tp == 4) {
						$('#ds-widget-status').show();
						$('#ds-widget-param-id').val($('#ds-widget-status-id').val());
					}
					else if (tp == 5) {
						$('#ds-widget-warning').show();
						$('#ds-widget-param-id').val($('#ds-widget-warning-id').val());
					}
					else if (tp == 7) {
						$('#ds-widget-visio').show();
						$('#ds-widget-param-id').val($('#ds-widget-visio-id').val());
					}
					else if (tp == 8) {
						$('#ds-widget-topo').show();
						$('#ds-widget-param-id').val($('#ds-widget-topo-id').val());
					} else if (tp == 9) {
						$('#ds-widget-sycs').show();
						$('#ds-widget-param-id').val($('#ds-widget-sycs-id').val());
					}
				});
				$('#ds-widget-edit-type').change(function () {
					$('#dashboard-widget-edit-form .input-init-hide').hide();
					var tp = $('#ds-widget-edit-type').val();
					if (tp == 1) {
						$('#ds-widget-edit-appletree').show();
						$('#ds-widget-edit-param-id').val($('#ds-widget-edit-appletree-id').val());
					}
					else if (tp == 2) {
						$('#ds-widget-edit-monitor').show();
						$('#ds-widget-edit-param-id').val($('#ds-widget-edit-monitor-id').val());
					}
					else if (tp == 3) {
						$('#ds-widget-edit-monitor').show();
						$('#ds-widget-edit-param-id').val($('#ds-widget-edit-monitor-id').val());
					}
					else if (tp == 4) {
						$('#ds-widget-edit-status').show();
						$('#ds-widget-edit-param-id').val($('#ds-widget-edit-status-id').val());
					}
					else if (tp == 5) {
						$('#ds-widget-edit-warning').show();
						$('#ds-widget-edit-param-id').val($('#ds-widget-edit-warning-id').val());
					}
					else if (tp == 7) {
						$('#ds-widget-edit-visio').show();
						$('#ds-widget-edit-param-id').val($('#ds-widget-edit-visio-id').val());
					}
					else if (tp == 8) {
						$('#ds-widget-edit-topo').show();
						$('#ds-widget-edit-param-id').val($('#ds-widget-edit-topo-id').val());
					}
					else if (tp == 9) {
						$('#ds-widget-edit-sycs').show();
						$('#ds-widget-edit-param-id').val($('#ds-widget-edit-sycs-id').val());
					}
				});

				$('#ds-chart-description').change(function () {
					var tp = $('#ds-chart-description').val();
					if (tp == 4) {
						$('#div-ds-chart-time').hide();
						$('#div-ds-chart-color').hide();
					} else {
						$('#div-ds-chart-time').show();
						$('#div-ds-chart-color').show();
					}
				});

				$('#dashboard-widget-add-form .input-init-hide select').change(function () { $('#ds-widget-param-id').val($(this).val()); });
				$('#dashboard-widget-edit-form .input-init-hide select').change(function () { $('#ds-widget-edit-param-id').val($(this).val()); });

				$('#dashboard-chart-add-form').submit(function () {

					var dtype = $('#ds-chart-description').val();
					var title = $('#ds-chart-name').val();
					var color = $('#ds-chart-color input').val();
					if (color == "") color = '#edc240';
					var timerange = $('#ds-chart-time').val();
					var did = $('#ds-chart-did').val();
					var mid = $('#ds-chart-mid').val();
					var indicator = $('#ds-chart-indicator').val();
					if (mid == '' || indicator == '') {
						jAlert('<h4>请选择监测点。</h4>');
						return false;
					}
					$('#dashboard-chart-add-modal').modal('hide');

					//var path = '/monitor/2/report?type='+t+'&fill='+f+'&color='+color+'&timerange='+timerange+'&mid='+mid+'&indicator='+indicator;
					var wrapper = $('<li data-title="' + title + '" data-vtype="100" data-dtype="' + dtype + '"'
						+ ' data-color="' + color + '" data-timerange="' + timerange + '"'
						+ ' data-did="' + did + '" data-mid="' + mid + '" data-indicator="' + indicator + '"></li>');

					wrapper.append('<h5>&nbsp;' + title + '</h5>'
						+ '<a href="javascript:;" class="gs-edit" style="display: inline;"><i style="color:' + sconColor + '" class="fa fa-pencil"></i></a>'
						+ '<a href="javascript:;" class="gs-close" style="display: inline;"><i style="color:' + sconColor + '" class="fa fa-times"></i></a>'
						+ '<a href="javascript:;" class="gs-refresh"><i style="color:' + sconColor + '" class="fa fa-refresh"></i></a>'
						+ '<div style="padding: 0px 15px 0 5px; text-align: center;">'
						+ '<div id="chartId" style="height: 170px;"></div></div>');

					gridster.add_widget(wrapper, 10, 7);
					init_widget(wrapper);

					displayHelp();
					return false;
				});

				$('#dashboard-chart-edit-form').submit(function () {
					var liObj = $('#dashboard-chart-edit-modal').data('tagObj');
					var dtype = $('#ds-chart-edit-description').val();
					var title = $('#ds-chart-edit-name').val();
					var color = $('#ds-chart-edit-color input').val();
					if (color == "") color = '#edc240';
					var timerange = $('#ds-chart-edit-time').val();
					var did = $('#ds-chart-edit-did').val();
					var mid = $('#ds-chart-edit-mid').val();
					var indicator = $('#ds-chart-edit-indicator').val();
					if (mid == '' || indicator == '') {
						jAlert('<h4>请选择监测点。</h4>');
						return false;
					}
					$('#dashboard-chart-edit-modal').modal('hide');

					liObj.find('h5').text(title);
					liObj.data('title', title);
					liObj.data('vtype', 100);
					liObj.data('dtype', dtype);
					liObj.data('color', color);
					liObj.data('timerange', timerange);
					liObj.data('did', did);
					liObj.data('mid', mid);
					liObj.data('indicator', indicator);
					liObj.find('h5').css("display", "block");
					init_widget(liObj);

					displayHelp();
					return false;
				});
				$('#dashboard-widget-editpage-modal').find('.back_imgCheck').on('click', 'input', function () {
					$(this).parent('div').addClass('act').siblings().removeClass('act');
					if ($(this).val() != 0) {
						$('#dashboard-widget-editpage-form input[name="bgcolor"]').val('');
					}
				})
				$('#dashboard-widget-addpage-modal').find('.back_imgCheck').on('click', 'input', function () {
					$(this).parent('div').addClass('act').siblings().removeClass('act');
					if ($(this).val() != 0) {
						$('#dashboard-widget-addpage-form input[name="bgcolor"]').val('');
					}
				})
				$('#dashboard-widget-addpage-form').submit(function () {
					var p = $('#dashboard-widget-addpage-form #ds-widget-pagename').val();
					var n = $('#dashboard-widget-addpage-form #ds-widget-refresh-f').val();

					if (!p) {
						jAlert('<h4>页面名称不能为空</h4>', '', function () { });
						$('#dashboard-widget-addpage-form #ds-widget-pagename').focus();
						return false;
					}
					if (isNaN(n) || n == '') {
						jAlert('<h4>页面刷新频率请输入数字。</h4>', '', function () { });
						$('#dashboard-widget-addpage-form #ds-widget-refresh-f').focus();
						return false;
					}
					$('#dashboard-widget-addpage-modal').modal('hide');

					var formData = $(this).serialize();
					if (!$('#dashboard-widget-addpage-form #ds-widget-isshowname').get(0).checked)
						formData += '&isshowname=0&showlabel=0';
					else
						formData += '&showlabel=1';
					if (!this.color_ornot.checked) {
						formData += '&color_ornot=0';
					} else {
						formData += '&pagecolor=' + encodeURIComponent($(this).find('input[name="textcolor"]').val()) + ',' + encodeURIComponent($(this).find('input[name="bgcolor"]').val());
					}
					if ($('#dashboard-widget-addpage-modal').find('.back_imgCheck div.act').length > 0 && $('#dashboard-widget-addpage-modal').find('.back_imgCheck div.act input').val() != 0) {
						formData += '&pagecolor=' + encodeURIComponent($(this).find('input[name="textcolor"]').val()) + ',' + encodeURIComponent($('#dashboard-widget-addpage-modal').find('.back_imgCheck div.act img').attr('src'));
					}
					//alert(formData);

					myGet(url + '&ct=add', formData, function (data) {
						if (data.status == 'success') {
							jSuccess('<h4>页面添加成功</h4>', "", function () { });
							GetListData(false, -1);
						} else {
							$(document).trigger("add-alerts", {
								message: "页面添加失败, 请与管理员联系",
								priority: "error"
							});
						}
					});

					return false;
				});

				$('#dashboard-widget-editpage-form').submit(function () {
					var pageId = $('#page-id-storage').val();
					var groupid = $('#page-id-group').val();
					var p = $('#dashboard-widget-editpage-form #ds-widget-pagename-edit').val();
					if (!p) {
						jAlert('<h4>页面名称不能为空</h4>', '', function () { });
						$('#dashboard-widget-editpage-form #ds-widget-pagename-edit').focus();
						return false;
					}
					var n = $('#dashboard-widget-editpage-form #ds-widget-refresh-f').val();
					if (isNaN(n) || n == '') {
						jAlert('<h4>页面刷新频率请输入数字。</h4>', '', function () { });
						$('#dashboard-widget-editpage-form #ds-widget-refresh-f').focus();
						return false;
					}
					$('#dashboard-widget-editpage-modal').modal('hide');

					var formData = $(this).serialize();
					if (!$('#dashboard-widget-editpage-form #ds-widget-isshowname-edit').get(0).checked)
						formData += '&isshowname=0&showlabel=0';
					else
						formData += '&showlabel=1';
					if (!this.color_ornot.checked) {
						formData += '&color_ornot=0';
					} else {
						formData += '&pagecolor=' + encodeURIComponent($(this).find('input[name="textcolor"]').val()) + ',' + encodeURIComponent($(this).find('input[name="bgcolor"]').val());
					}
					var Oact = $('#dashboard-widget-editpage-modal').find('.back_imgCheck div.act input').val();
					if ($('#dashboard-widget-editpage-modal').find('.back_imgCheck div.act').length > 0 && $('#dashboard-widget-editpage-modal').find('.back_imgCheck div.act input').val() != 0) {
						formData += '&pagecolor=' + encodeURIComponent($(this).find('input[name="textcolor"]').val()) + ',' + encodeURIComponent($('#dashboard-widget-editpage-modal').find('.back_imgCheck div.act img').attr('src'));
					}


					myGet(url + '&ct=edit&page_id=' + pageId + '&groupids=' + groupid, formData, function (data) {
						if (data.status == 'success') {
							jSuccess('<h4>页面编辑成功</h4>', "", function () { });
							GetListData(false, pageId);
						} else {
							jAlert('<h4>页面编辑失败</h4>');
						}
					});

					return false;
				});

				$('.gridster').on('click', 'a.gs-edit', function () {
					var liObj = $(this).parent();
					var vtype = liObj.data('vtype');
					if (vtype == 100) {
						//图标
						var did = liObj.data('did');
						var mid = liObj.data('mid');
						var indicator = liObj.data('indicator');
						var timerange = liObj.data('timerange');
						var color = liObj.data('color');
						var dtype = liObj.data('dtype');
						var title = liObj.data('title');
						//she zhi
						$('#ds-chart-edit-description').val(dtype);
						$('#ds-chart-edit-name').val(title);
						$('#ds-chart-edit-color input').val(color);
						$('#ds-chart-edit-color .bfh-colorpicker-icon').css('background-color', color);
						$('#ds-chart-edit-time').val(timerange);
						$('#ds-chart-edit-did').val(did);
						$('#ds-chart-edit-mid').val(mid);
						$('#ds-chart-edit-indicator').val(indicator);
						$('#dashboard-chart-edit-modal').modal('show');
						$('#dashboard-chart-edit-modal').data('tagObj', liObj);
						if (did && did != '') {
							//对象
							myGet(bsiurl + '/gettreebsbyid.BSI?encoding=utf-8', 'id=' + did, function (json) {
								if (json.data) {
									var TreeDatas = new Array();
									var treeobj = json.data;
									for (var i = 0; i < treeobj.length; i++) {
										var cObj = GetChildJson(treeobj[i]);
										if (cObj != null)
											TreeDatas.push(cObj);
									}
									var str = '';
									var dname = '';
									for (var i = 0; i < TreeDatas.length; i++) {
										dname = TreeDatas[i].text;
										str += '<a data-id="' + TreeDatas[i].id + '" href="javascript:;" class="list-group-item" style="border:0; padding: 5px 10px;">'
											+ '<i style="padding: 10px; float: left; margin-right:5px" class="' + TreeDatas[i].icon + '-background"></i>'
											+ '<span style="width: 115px;padding-left: 5px;line-height: 22px;word-wrap: break-word;word-break: break-all;">' + TreeDatas[i].text + '</span>';
									}
									$('#devices-wrapper').html(str);

									//检测点
									$('#points-wrapper').html('');
									var getmonitorlistUrl = bsiurl + '/getmonitorlist.BSI?&encoding=utf-8&haspluginname=1&id=' + encodeURI(did);
									myGet(getmonitorlistUrl, function (Json) {
										if (!Json.data) return;
										if (!Json.data[0].monitor) return;
										var data = Json.data[0].monitor;

										var pluginname = '';
										$(data).each(function (index) {
											var name = data[index].name;
											namesmall = name.substr(0, 15);
											if (data[index].id == mid) pluginname = data[index].pluginname;
											$('#points-wrapper').append('<a data-did="' + did + '" data-dname="' + dname + '" data-id="' + data[index].id + '" data-plugin="' + data[index].pluginname + '" title="' + name + '" '
												+ 'href="javascript:;" class="list-group-item">'
												+ '<span class="st-square st-square-' + jsonStaus[data[index].state].icon + '"></span>' + namesmall + '</a>');
										});
										//指标
										$('#indicators-wrapper').html('');
										var indicatorUrl = bsiurl + '/indicator.BSI?encoding=utf-8&pluginname=' + encodeURI(pluginname);
										myGet(indicatorUrl, function (Json) {
											if (!isArray(Json.data) || !Json.data[0]) return;
											var data = Json.data[0].indicators;
											var indicatorname = '';
											$(data).each(function (index) {
												if (data[index].indicator == indicator) indicatorname = data[index].name;
												$('#indicators-wrapper').append('<a data-did="' + did + '" data-dname="' + dname + '" data-unit="' + data[index].unit + '" data-mid="' + mid + '" data-indicator="' + data[index].indicator + '" href="javascript:;" class="list-group-item">' + data[index].name + '</a>');
											});

											$('#ds-chart-edit-point').val(dname + ": " + indicatorname);
										});
									});
								}
							});

						}
					} else if (vtype < 100) {
						$('#dashboard-widget-edit-modal').data('tagObj', liObj);
						$('#dashboard-widget-edit-modal').modal('show');
						var mid = liObj.data('mid');
						//console.log(mid)
						var vtype = liObj.data('vtype');
						var title = liObj.data('title');
						$('#ds-widget-edit-name').val(title);
						if (title && title != '') {
							$('#ds-edit-display-title-ornot').prop('checked', true);
							$('#ds-widget-edit-name-input').show();
						} else {
							$('#ds-edit-display-title-ornot').prop('checked', false);
							$('#ds-widget-edit-name-input').hide();
						}
						$('#ds-widget-edit-type').val(vtype);

						$('#dashboard-widget-edit-form .input-init-hide').hide();
						var tp = vtype;
						if (tp == 1) {
							$('#ds-widget-edit-appletree').show();
							$('#ds-widget-edit-appletree-id').val(mid);
							$('#ds-widget-edit-param-id').val(mid);
						}
						else if (tp == 2) {
							$('#ds-widget-edit-monitor').show();
							$('#ds-widget-edit-monitor-id').val(mid);
							$('#ds-widget-edit-param-id').val(mid);
						}
						else if (tp == 3) {
							$('#ds-widget-edit-monitor').show();
							$('#ds-widget-edit-monitor-id').val(mid);
							$('#ds-widget-edit-param-id').val(mid);
						}
						else if (tp == 4) {
							$('#ds-widget-edit-status').show();
							$('#ds-widget-edit-status-id').val(mid);
							$('#ds-widget-edit-param-id').val(mid);
						}
						else if (tp == 5) {
							$('#ds-widget-edit-warning').show();
							$('#ds-widget-edit-warning-id').val(mid);
							$('#ds-widget-edit-param-id').val(mid);
						}
						else if (tp == 7) {
							$('#ds-widget-edit-visio').show();
							$('#ds-widget-edit-visio-id').val(mid);
							$('#ds-widget-edit-param-id').val(mid);
						}
						else if (tp == 8) {
							$('#ds-widget-edit-topo').show();
							$('#ds-widget-edit-topo-id').val(mid);
							var timestamp = liObj.data('timestamp');
							$('#ds-widget-edit-param-id').data('timestamp',timestamp);
							$('#ds-widget-edit-param-id').val(mid);
						}
						else if (tp == 9) {
							$('#ds-widget-edit-sycs').show();
							$('#ds-widget-edit-sycs-id').val(mid);
							$('#ds-widget-edit-param-id').val(mid);
						}

					} else if (vtype == 200) {
						//参数初始化
						var title = liObj.data('title');
						var dtype = Math.floor(liObj.data('dtype'));
						var IsShowMonitorName = 0;
						var StatType = 0;
						var SortOp = 0;
						if (dtype >= 100) {
							IsShowMonitorName = 1;
							dtype -= 100;
						}
						if (dtype >= 10) {
							StatType = 1;
							dtype -= 10;
						}
						if (dtype >= 1) SortOp = 1;
						var Pagerowcount = liObj.data('timerange');
						var Scope = liObj.data('did') + '';;
						var PluginName = liObj.data('mid');
						var Indication = liObj.data('indicator');

						$('#ds-topn-title').val(title);
						$('#ds-topn-Scope').jstree().deselect_all();
						var ar = Scope.split(',');
						for (var i = 0; i < ar.length; i++)
							$('#ds-topn-Scope').jstree().select_node(ar[i]);
						if (IsShowMonitorName == 0)
							$('#ds-topn-IsShowMonitorName').get(0).checked = false;
						else
							$('#ds-topn-IsShowMonitorName').get(0).checked = true;
						if (StatType == 0)
							$('#ds-topn-StatType1').click();
						else
							$('#ds-topn-StatType2').click();
						if (SortOp == 0)
							$('#ds-topn-SortOp1').click();
						else
							$('#ds-topn-SortOp2').click();
						$('#ds-topn-Pagerowcount').val(Pagerowcount);
						$('#ds-topn-PluginName').data('value', PluginName);
						$('#ds-topn-Indication').data('value', Indication);
						$('#dashboard-topn-add-modal .modal-header h4').text('修改TopN报表');
						$('#dashboard-topn-add-modal').data('tag', liObj);
						$('#dashboard-topn-add-modal').modal('show');
					} else if (vtype == 300) {
						//参数初始化
						var title = liObj.data('title');
						var dtype = Math.floor(liObj.data('type'));
						var devspan = liObj.data('did');
						var timebegin = liObj.data('mid');
						var timeend = liObj.data('color');
						var timerange = liObj.data('timerange');

						$('#da-warning-GroupDevTree').jstree().deselect_all();
						var ar = devspan.split(',');
						for (var i = 0; i < ar.length; i++)
							$('#da-warning-GroupDevTree').jstree().select_node(ar[i]);
						$('#dashboard-History-add-modal .modal-header h4').text('修改历史告警');
						$('#dashboard-History-add-modal #ds-warning-title').val(title);
						$('#dashboard-History-add-modal #ds-warning-begintime').val(timerange.split(',')[0]);
						eval($('#dashboard-History-add-modal #ds-warning-riqiduan' + timerange.split(',')[1])).click();
						$('#dashboard-History-add-modal').data('tag', liObj);
						$('#dashboard-History-add-modal').modal('show');
					} else if (vtype == 210) {
						var title = liObj.data('title');
						var url = liObj.data('mid');
						$('#dashboard-OuterWeb-add-modal #OuterWebUrl').val(url);
						$('#dashboard-OuterWeb-add-modal #OuterWebName').val(title);
						$('#dashboard-OuterWeb-add-modal .modal-header h4').text('修改外部页面');
						$('#dashboard-OuterWeb-add-modal').data('tagObj', liObj);
						$('#dashboard-OuterWeb-add-modal').modal('show');
					} else if (vtype == 110) {
						//参数初始化
						var did = liObj.data('did');
						var mid = liObj.data('mid');
						var indicator = liObj.data('indicator');
						var timerange = liObj.data('timerange');
						var color = liObj.data('color');
						var title = liObj.data('title');
						//she zhi
						$('#ds-NetTraffic-name').val(title);
						$('#ds-NetTraffic-time').val(timerange);
						$('#ds-NetTraffic-did').val(did);
						$('#ds-NetTraffic-mid').val(mid);
						$('#ds-NetTraffic-indicator1').val(indicator);
						$('#ds-NetTraffic-indicator2').val(color);
						$('#dashboard-NetTraffic-add-modal').modal('show');
						$('#dashboard-NetTraffic-add-modal .modal-header h4').text('修改流量报表');
						$('#dashboard-NetTraffic-add-modal').data('tagObj', liObj);
						if (did && did != '') {
							//对象
							myGet(bsiurl + '/gettreebsbyid.BSI?encoding=utf-8', 'id=' + did, function (json) {
								if (json.data) {
									var TreeDatas = new Array();
									var treeobj = json.data;
									for (var i = 0; i < treeobj.length; i++) {
										var cObj = GetChildJson(treeobj[i]);
										if (cObj != null)
											TreeDatas.push(cObj);
									}
									var str = '';
									var dname = '';
									for (var i = 0; i < TreeDatas.length; i++) {
										dname = TreeDatas[i].text;
										str += '<a data-id="' + TreeDatas[i].id + '" href="javascript:;" class="list-group-item" style="border:0; padding: 5px 10px;">'
											+ '<i style="padding: 10px; float: left; margin-right:5px" class="' + TreeDatas[i].icon + '-background"></i>'
											+ '<span style="width: 115px;padding-left: 5px;line-height: 22px;word-wrap: break-word;word-break: break-all;">' + TreeDatas[i].text + '</span>';
									}
									$('#NetTraffic-devices-wrapper').html(str);

									//检测点
									$('#NetTraffic-points-wrapper').html('');
									var getmonitorlistUrl = bsiurl + '/getmonitorlist.BSI?&encoding=utf-8&haspluginname=1&id=' + encodeURI(did);
									myGet(getmonitorlistUrl, function (Json) {
										if (!Json.data) return;
										if (!Json.data[0].monitor) return;
										var data = Json.data[0].monitor;

										var pluginname = '';
										$(data).each(function (index) {
											var name = data[index].name;
											namesmall = name.substr(0, 15);
											if (data[index].id == mid) pluginname = data[index].pluginname;
											if ('networkinterface' == data[index].pluginname) {
												$('#NetTraffic-points-wrapper').append('<a data-did="' + did + '" data-dname="' + dname + '" data-id="' + data[index].id + '" data-plugin="' + data[index].pluginname + '" title="' + name + '" '
													+ 'href="javascript:;" class="list-group-item" style="border:0; padding: 5px 10px;">'
													+ '<span class="st-square st-square-' + jsonStaus[data[index].state].icon + '"></span>' + namesmall + '</a>');
											}
										});
										//指标
										$('#NetTraffic-indicators-wrapper').data('did', did);
										$('#NetTraffic-indicators-wrapper').data('dname', dname);
										$('#NetTraffic-indicators-wrapper').data('mid', mid);
										$('#NetTraffic-indicators-wrapper').data('pluginname', pluginname);
										$('#NetTraffic-indicators-wrapper').show();

										var indicatorname = $('#NetTraffic-indicators-wrapper > a[data-indicator1="' + indicator + '"]').text();
										$('#ds-NetTraffic-point').val(dname + ": " + indicatorname);
									});
								}
							});

						}
					}
				});

				$('#dashboard-title-edit-form').submit(function () {
					var title = $('#ds-widget-title').val();
					$('.title-editing').html(title);
					$('.title-editing').parent().data('title', title);
					$('#dashboard-title-edit').modal('hide');

					return false;
				});


				$('#dashboard-widget-show-hide').on('click', function () {
					var isShow = $(this).data('isshow');
					if (!!isShow) {
						isShow = false;
						disable_edit();
						$(this).html('编辑');
						//$(this).prevAll().hide();
					} else {
						isShow = true;
						enable_edit();
						$(this).html('浏览');
						//$(this).prevAll().show();
					}
					$(this).data('isshow', isShow);
				});
				//$('#dashboard-widget-show-hide').trigger('click').trigger('click');

				$('#gloabal-widget-view').on('click', function () {
					enable_edit();
				});

				$('#gloabal-widget-edit').on('click', function () {
					disable_edit();
				});

				$('#gloabal-widget-fullscreen').on('click', function () {
//					setTimeout(function () {
						//重置窗体高度
						var h = window.screen.height;
						var t = $('.gridster').offset().top;
						
						$('.gridster').css('min-height', h - t + 100);
						//重画小图
						$('.gridster >ul > li').each(function (index) {
							try {
								var vtype = $(this).data('vtype');
								if (vtype == 100) {
									try {
										$(this).find('#chartId').highcharts().destroy();
									} catch (ex) {
										console.log(ex);
									}
									init_widget($(this));
								}
//								RefreshWidgetView();
							}
							catch (e) {
								if (isDebug)
									alert(e);
							}
						});
//					}, 100);
				});
				$(document).bind("myEndFullscreenEvent", function () {
					if (lb_timeoutID != 0) {
						clearTimeout(lb_timeoutID);
						lb_timeoutID = 0;
					}
					bIsInLunbo = false;
					//重画小图
					setTimeout(function () {
						$('.gridster >ul > li').each(function (index) {
							try {
								var vtype = $(this).data('vtype');
								if (vtype == 100) {
									try {
										$(this).find('#chartId').highcharts().destroy();
									} catch (ex) {
										console.log(ex);
									}
									init_widget($(this));
								}
//								RefreshWidgetView();
							}
							catch (e) {
								if (isDebug)
									alert(e);
							}
						});
					}, 100);
				});

				$('#dashboard-widget-save').on('click', function () {
					var a = gridster.serialize();
					var isfor = true;
					for (var iIndex = 0; iIndex < a.length; iIndex++) {
						if (!a[iIndex].vtype) {
							a.splice(iIndex, 1);
							isfor = false;
							for (var iIndex1 = 0; iIndex1 < a.length; iIndex1++) {
								if(a[iIndex1].vtype == '8'){
									$('.gridster').find('ul li').each(function(){
										var type8mid = $(this).data('mid');
										if(type8mid == a[iIndex1].mid){
											var objextra = new Object();
											objextra.showtraffic = $(this).data('showtraffic');
											objextra.statshowtype = $(this).data('statshowtype');
											a[iIndex1].extra = JSON.stringify(objextra);
//											a[iIndex1].statshowtype = ;
										}
									})									
								}
							}
							break;
						}
					}
					if(isfor){
						for (var iIndex1 = 0; iIndex1 < a.length; iIndex1++) {
							if(a[iIndex1].vtype == '8'){
								$('.gridster').find('ul li').each(function(){
									var type8mid = $(this).data('mid');
									if(type8mid == a[iIndex1].mid){
										var objextra = new Object();
										objextra.showtraffic = $(this).data('showtraffic');
										objextra.statshowtype = $(this).data('statshowtype');
										a[iIndex1].extra = JSON.stringify(objextra);
										/*a[iIndex1].showtraffic = $(this).data('showtraffic');
										a[iIndex1].statshowtype = $(this).data('statshowtype');*/
									}
								})									
							}
						}
					}
					
					var p = $('#page-id-storage').val();

					myPost(url, { ct: "update", data: a, page: p }, function (data) {
						if (data.status == 'success') {
							jSuccess("<h4>控制台布局保存成功</h4>");
							//setTimeout(window.location.reload(), 1000);
						} else {
							jAlert("<h4>控制台布局保存失败, 请与管理员联系</h4>");
						}
					});
				});

				$('#dashboard-widget-deletepage').click(function () {
					var pageId = $('#page-id-storage').val();
					if (pageId == 1) {
						jAlert("<h4>默认页面无法删除<h4>");
						return false;
					}
					jConfirm("<h4>确定删除整个页面吗？</h4> 提示：该操作无法恢复", "", function (r) {
						if (r) {
							myGet(url + '&ct=delete&page_id=' + pageId, function (data) {
								if (data.status == 'success') {
									jSuccess('<h4>页面删除成功</h4>', "", function () { });
									GetListData(true);
								} else {
									jAlert('<h4>页面删除失败, 请与管理员联系</h4>');
								}
							});
						} else {
							return false;
						}
					});
				});


				$('#dashboard-widget-addbtngrp-modal .modal-body button').click(function () {
					var tag = $(this).data('tag');
					$('#dashboard-widget-addbtngrp-modal').modal('hide');
					if (tag == 'widget-add') {
						$('#dashboard-widget-add-modal').modal('show');
					} else if (tag == 'chart-add') {
						$('#dashboard-chart-add-modal').modal('show');
					} else if (tag == 'TopN-add') {
						//参数初始化
						$('#ds-topn-Scope').jstree().deselect_all();
						$('#ds-topn-title').val('');
						$('#ds-topn-StatType1').click();
						$('#ds-topn-SortOp1').click();
						$('#ds-topn-Pagerowcount').val('10');
						$('#ds-topn-IsShowMonitorName').get(0).checked = true;
						$('#ds-topn-PluginName').html('');
						$('#ds-topn-Indication').html('');
						$('#dashboard-topn-add-modal .modal-header h4').text('添加TopN报表');
						$('#dashboard-topn-add-modal').data('tag', '');
						$('#dashboard-topn-add-modal').modal('show');
					} else if (tag == 'NetTraffic-add') {
						//参数初始化
						$('#ds-NetTraffic-point').val('');
						$('#ds-NetTraffic-time').val('1');
						$('#ds-NetTraffic-name').val('');
						$('#ds-NetTraffic-did').val('');
						$('#ds-NetTraffic-mid').val('');
						$('#ds-NetTraffic-indicator1').val('');
						$('#ds-NetTraffic-indicator2').val('');
						$('#dashboard-NetTraffic-add-modal .modal-header h4').text('添加流量报告');
						$('#dashboard-NetTraffic-add-modal').data('tagObj', '');
						$('#dashboard-NetTraffic-add-modal').modal('show');
					} else if (tag == 'OuterWeb-add') {
						//参数初始化
						$('#dashboard-OuterWeb-add-modal #OuterWebUrl').val('');
						$('#dashboard-OuterWeb-add-modal #OuterWebName').val('');
						$('#dashboard-OuterWeb-add-modal .modal-header h4').text('添加外部页面');
						$('#dashboard-OuterWeb-add-modal').data('tagObj', '');
						$('#dashboard-OuterWeb-add-modal').modal('show');
					} else if (tag == "History-add") {
						$('#dashboard-History-add-modal').data('tag', '');
						$('#dashboard-History-add-modal .modal-header h4').text('添加历史告警');
						$('#dashboard-History-add-modal').modal('show');
					}
				});

				$('#ds-chart-edit-point').click(function () {
					$('#point-select-modal').modal('show');
					$('#indicators-wrapper').data('tagObj', 1);
				});

				$('#ds-chart-point').click(function () {
					$('#point-select-modal').modal('show');
					$('#indicators-wrapper').data('tagObj', 0);

					//$('#devices-wrapper').html('');
					//$('#points-wrapper').html('');
					//$('#indicators-wrapper').html('');
				});

				$('#ds-NetTraffic-point').click(function () {
					init_devices_tree_NetTraffic();
					$('#point-NetTraffic-modal').modal('show');
					$('#NetTraffic-indicators-wrapper').data('tagObj', 0);
				});

				// init_devices_tree(false,'',9999);
				init_devices_tree(true, 'network', 9999);

				$('#groups-wrapper').on('click', ' li.jstree-node > a', function () {
					var id = $(this).parent().attr('id');
					$('#devices-wrapper').html('');
					$('#points-wrapper').html('');
					$('#indicators-wrapper').html('');


					var dname = $(this).text();

					$('#points-wrapper').html('');
					$('#indicators-wrapper').html('');
					//'/tree/points/'+id+'?haspluginname=1'
					var getmonitorlistUrl = bsiurl + '/getmonitorlist.BSI?&encoding=utf-8&haspluginname=1&id=' + encodeURI(id);
					myGet(getmonitorlistUrl, function (Json) {
						if (!Json.data) return;
						if (!Json.data[0].monitor) return;
						var data = Json.data[0].monitor;
						$(data).each(function (index) {
							var name = data[index].name;
							namesmall = name.substr(0, 15);
							if (data[index].mxtype == 1) {
								$('#points-wrapper').append('<a data-did="' + id + '" data-dname="' + dname + '" data-id="' + data[index].id + '" data-plugin="' + data[index].pluginname + '" title="' + name + '" href="javascript:;" class="list-group-item">'
									+ '<span class="st-square st-square-' + jsonStaus[data[index].state].icon + '"></span>' + namesmall + '</a>');
							}

						});
					});
				});




				$('#points-wrapper').on('click', 'a', function () {
					var pluginname = $(this).data('plugin');
					var pid = $(this).data('id');
					var dname = $(this).data('dname');
					var did = $(this).data('did');

					$('#indicators-wrapper').html('');
					//'/tree/indicators/'+pluginname
					var indicatorUrl = bsiurl + '/indicator.BSI?encoding=utf-8&pluginname=' + encodeURI(pluginname);
					myGet(indicatorUrl, function (Json) {
						if (!Json.data[0].indicators) return;
						var data = Json.data[0].indicators;
						$(data).each(function (index) {
							$('#indicators-wrapper').append('<a data-did="' + did + '" data-dname="' + dname + '" data-name="' + data[index].name + '" data-unit="' + data[index].unit + '" data-mid="' + pid + '" data-indicator="' + data[index].indicator + '" href="javascript:;" class="list-group-item">' + data[index].name + '(' + data[index].unit + ')</a>');
						});
					});
				});
				$('#indicators-wrapper').on('click', 'a', function () {
					var dname = $(this).data('dname');
					var unit = $(this).data('unit');
					var name = $(this).data('name');
					if ($('#indicators-wrapper').data('tagObj') == 0) {
						$('#ds-chart-point').val(dname + ": " + name);
						$('#ds-chart-name').val(dname + ": " + name + "(" + unit + ")");
						$('#ds-chart-did').val($(this).data('did'));
						$('#ds-chart-mid').val($(this).data('mid'));
						$('#ds-chart-indicator').val($(this).data('indicator'));
						$('#point-select-modal').modal('hide');
					} else {
						$('#ds-chart-edit-point').val(dname + ": " + name);
						$('#ds-chart-edit-name').val(dname + ": " + name + "(" + unit + ")");
						$('#ds-chart-edit-did').val($(this).data('did'));
						$('#ds-chart-edit-mid').val($(this).data('mid'));
						$('#ds-chart-edit-indicator').val($(this).data('indicator'));
						$('#point-select-modal').modal('hide');
					}
				});

				// init_devices_tree_NetTraffic();
				$('#NetTraffic-groups-wrapper').on('click', ' li.jstree-node > a', function () {
					var id = $(this).parent().attr('id');
					// $('#NetTraffic-devices-wrapper').html('');
					$('#NetTraffic-points-wrapper').html('');
					$('#NetTraffic-indicators-wrapper').hide();

					var dname = $(this).text();

					var getmonitorlistUrl = bsiurl + '/getmonitorlist.BSI?&encoding=utf-8&haspluginname=1&id=' + encodeURI(id);
					myGet(getmonitorlistUrl, function (Json) {
						if (!Json.data) return;
						if (!Json.data[0].monitor) return;
						var data = Json.data[0].monitor;
						$(data).each(function (index) {
							var name = data[index].name;
							namesmall = name.substr(0, 15);
							if (data[index].mxtype == 1) {
								// if ('networkinterface'==data[index].pluginname && data[index].mxtype==1) {
								$('#NetTraffic-points-wrapper').append('<a data-did="' + id + '" data-dname="' + dname + '" data-id="' + data[index].id + '" data-plugin="' + data[index].pluginname + '" title="' + name + '" href="javascript:;" class="list-group-item" style="border:0; padding: 5px 10px;">'
									+ '<span class="st-square st-square-' + jsonStaus[data[index].state].icon + '"></span>' + namesmall + '</a>');
							}
						});
					});
				});

				$('#NetTraffic-points-wrapper').on('click', 'a', function () {
					var pluginname = $(this).data('plugin');
					var mid = $(this).data('id');
					var dname = $(this).data('dname');
					var did = $(this).data('did');

					$('#NetTraffic-indicators-wrapper').data('did', did);
					$('#NetTraffic-indicators-wrapper').data('dname', dname);
					$('#NetTraffic-indicators-wrapper').data('mid', mid);
					$('#NetTraffic-indicators-wrapper').data('pluginname', pluginname);
					$('#NetTraffic-indicators-wrapper').show();
				});
				$('#NetTraffic-indicators-wrapper').on('click', 'a', function () {
					var obj = $('#NetTraffic-indicators-wrapper');
					var dname = obj.data('dname');
					var name = $(this).text();

					$('#ds-NetTraffic-point').val(dname + ": " + name);
					$('#ds-NetTraffic-name').val(dname + ": " + name);
					$('#ds-NetTraffic-did').val(obj.data('did'));
					$('#ds-NetTraffic-mid').val(obj.data('mid'));
					$('#ds-NetTraffic-indicator1').val($(this).data('indicator1'));
					$('#ds-NetTraffic-indicator2').val($(this).data('indicator2'));
					$('#point-NetTraffic-modal').modal('hide');
				});

				$('#dashboard-NetTraffic-add-form').submit(function () {
					var title = $('#ds-NetTraffic-name').val();
					var timerange = $('#ds-NetTraffic-time').val();
					var did = $('#ds-NetTraffic-did').val();
					var mid = $('#ds-NetTraffic-mid').val();
					var indicator = $('#ds-NetTraffic-indicator1').val();
					var color = $('#ds-NetTraffic-indicator2').val();
					if (mid == '' || indicator == '') {
						jAlert('<h4>请选择监测点。</h4>');
						return false;
					}
					$('#dashboard-NetTraffic-add-modal').modal('hide');

					var wrapper = $('#dashboard-NetTraffic-add-modal').data('tagObj');
					if (wrapper == '') {
						wrapper = $('<li data-title="' + title + '" data-vtype="110"'
							+ ' data-color="' + color + '" data-timerange="' + timerange + '"'
							+ ' data-did="' + did + '" data-mid="' + mid + '"  data-indicator="' + indicator + '"></li>');
						wrapper.append('<h5>&nbsp;' + title + '</h5>'
							+ '<a href="javascript:;" class="gs-edit" style="display: inline;"><i style="color:' + sconColor + '" class="fa fa-pencil"></i></a>'
							+ '<a href="javascript:;" class="gs-close" style="display: inline;"><i style="color:' + sconColor + '" class="fa fa-times"></i></a>'
							+ '<a href="javascript:;" class="gs-refresh"><i style="color:' + sconColor + '" class="fa fa-refresh"></i></a>'
							+ '<div style="padding: 0px 15px 0 5px; text-align: center;">'
							+ '<div id="chartId" style="height: 170px;"></div></div>');
						gridster.add_widget(wrapper, 10, 7);
					} else {
						wrapper.find('h5').first().text(title);
						wrapper.data('title', title);
						wrapper.data('color', color);
						wrapper.data('timerange', timerange);
						wrapper.data('did', did);
						wrapper.data('mid', mid);
						wrapper.data('indicator', indicator);
					}
					init_widget(wrapper);

					displayHelp();
					return false;
				});


				$('.gridster').on('click', function () {
					$('.popover').remove();
				});

				if (window.location.hash != '') {
					var idtmp = window.location.hash;
					window.location.hash = '';
					if (idtmp.length > 0 && idtmp[0] == '#') idtmp = idtmp.substr(1, idtmp.length - 1);
					if (isNaN(idtmp)) GetListData(true, 0);
					else GetListData(false, Math.floor(idtmp));
				} else {
					GetListData(true, 0);
				}

				//TopN
				GetDevTree();
				$('#dashboard-topn-add-form').submit(function () {
					var ds = $('#ds-topn-Scope').jstree().get_selected(true);
					var devarray = GetTreeSelectedIdArray(ds);
					if (devarray.length <= 0) {
						jAlert('<h4>请选择一个设备</h4>', "");
						return false;
					}
					var Scope = devarray.join(',');
					var title = $('#ds-topn-title').val();
					if (title == '') {
						jAlert('<h4>请输入报告的标题。</h4>', "");
						return false;
					}
					var StatType = $(this).find('input[name="StatType"]:checked').val();
					var SortOp = $(this).find('input[name="SortOp"]:checked').val();
					var Pagerowcount = $('#ds-topn-Pagerowcount').val();
					if (Pagerowcount == '' || isNaN(Pagerowcount)) {
						jAlert('<h4>报告条数请输入有效的数字。</h4>');
						return false;
					}
					var IsShowMonitorName = 0;
					if ($('#ds-topn-IsShowMonitorName').get(0).checked) IsShowMonitorName = 1;
					var PluginName = $('#ds-topn-PluginName').val();
					var Indication = $('#ds-topn-Indication').val();

					var dtype = IsShowMonitorName * 100 + StatType * 10 + SortOp * 1;
					var timerange = Pagerowcount;
					var color = '';
					var did = Scope;
					var mid = PluginName;
					var indicator = Indication;
					$('#dashboard-topn-add-modal').modal('hide');

					var wrapper = $('#dashboard-topn-add-modal').data('tag');
					if (wrapper == '') {
						wrapper = $('<li data-title="' + title + '" data-vtype="200" data-dtype="' + dtype + '"'
							+ ' data-color="' + color + '" data-timerange="' + timerange + '"'
							+ ' data-did="' + did + '" data-mid="' + mid + '" data-indicator="' + indicator + '"></li>');

						wrapper.append('<h5>&nbsp;' + title + '</h5>'
							+ '<a href="javascript:;" class="gs-edit" style="display: inline;"><i style="color:' + sconColor + '" class="fa fa-pencil"></i></a>'
							+ '<a href="javascript:;" class="gs-close" style="display: inline;"><i style="color:' + sconColor + '" class="fa fa-times"></i></a>'
							+ '<a href="javascript:;" class="gs-refresh"><i style="color:' + sconColor + '" class="fa fa-refresh"></i></a>'
							+ '<div style="padding: 0px 15px 0 5px; text-align: center;">'
							+ '<div id="chartId" style="height: 170px;"></div></div>');

						gridster.add_widget(wrapper, 10, 7);
					} else {
						wrapper.find('h5').first().text(title);
						wrapper.data('title', title);
						wrapper.data('dtype', dtype);
						wrapper.data('timerange', timerange);
						wrapper.data('did', did);
						wrapper.data('mid', mid);
						wrapper.data('indicator', indicator);
					}
					init_widget(wrapper);

					displayHelp();

					return false;
				});

				//历史告警
				loadtree();
				$('#dashboard-History-add-form').submit(function () {
					var title = $('#ds-warning-title').val();
					var timer = this.begintime.value;
					var startdate = '';
					var enddate = '';
					var timetype = 0;
					if (this.begintime.value == '') {
						jAlert('<h4>请选择您要查看报告的日期</h4>');
						return false;
					}
					var arr = this.begintime.value.split('-');
					var dt1 = new Date(arr[0], arr[1] - 1, arr[2], 0, 0, 0);
					var dt2 = new Date(arr[0], arr[1] - 1, arr[2], 0, 0, 0);
					if ($(this).find('#ds-warning-riqiduan1').get(0).checked) {
						startdate = this.begintime.value;
						enddate = startdate;
						timetype = 1;
					} else if ($(this).find('#ds-warning-riqiduan2').get(0).checked) {
						var iDay = dt1.getDay();
						if (iDay == 0) iDay = 7;
						var iDate = dt1.getDate();
						var newDate = iDate - (iDay - 1);
						dt1.setDate(newDate);
						startdate = dt1.getFullYear() + '-' + (dt1.getMonth() + 1) + '-' + dt1.getDate();
						newDate = iDate + (7 - iDay);
						dt2.setDate(newDate);
						enddate = dt2.getFullYear() + '-' + (dt2.getMonth() + 1) + '-' + dt2.getDate();
						timetype = 2;
					} else if ($(this).find('#ds-warning-riqiduan3').get(0).checked) {
						var iDate = dt1.getDate();
						var iMonth = dt1.getMonth();
						var iYear = dt1.getFullYear();
						startdate = iYear + '-' + (iMonth + 1) + '-1';
						if (iMonth == 0 || iMonth == 2 || iMonth == 4 || iMonth == 6 || iMonth == 7 || iMonth == 9 || iMonth == 11) {
							enddate = iYear + '-' + (iMonth + 1) + '-31';
						} else if (iMonth != 1) {
							enddate = iYear + '-' + (iMonth + 1) + '-30';
						} else {
							dt2.setDate(29);
							if (dt2.getMonth() != iMonth) {
								enddate = iYear + '-' + (iMonth + 1) + '-28';
							} else {
								enddate = iYear + '-' + (iMonth + 1) + '-29';
							}
						}
						timetype = 3;
					} else {
						jAlert('<h4>请选择日期段。</h4>');
						return false;
					}
					var treeObj = $('#da-warning-GroupDevTree').jstree();
					var ds = treeObj.get_selected(true);
					var devarray = GetTreeSelectedIdArray(ds);
					if (devarray.length <= 0) {
						jAlert('<h4>请选择监测点</h4>', "");
						return false;
					}
					var str = '';
					for (var i = 0; i < devarray.length; i++) {
						if ((i + 1) == devarray.length) {
							str += devarray[i]
						} else {
							str += devarray[i] + ',';
						}
					}
					$('#dashboard-History-add-modal').modal('hide');
					var wrapper = $('#dashboard-History-add-modal').data('tag');
					if (wrapper == '') {
						timer
						wrapper = $('<li data-title="' + title + '" data-vtype="300" data-did="' + str + '"'
							+ ' data-dtype="' + 5 + '" data-mid="' + startdate + '"'
							+ ' data-color="' + enddate + '" data-timerange=' + timer + ',' + timetype + '></li>');

						wrapper.append('<h5>&nbsp;' + title + '</h5>'
							+ '<a href="javascript:;" class="gs-edit" style="display: inline;"><i style="color:' + sconColor + '" class="fa fa-pencil"></i></a>'
							+ '<a href="javascript:;" class="gs-close" style="display: inline;"><i style="color:' + sconColor + '" class="fa fa-times"></i></a>'
							+ '<a href="javascript:;" class="gs-refresh"><i style="color:' + sconColor + '" class="fa fa-refresh"></i></a>'
							+ '<div style="padding: 0px 15px 0 5px; text-align: center;">'
							+ '<div id="chartId" style="height: 170px;"></div></div>');

						gridster.add_widget(wrapper, 10, 7);
					} else {
						wrapper.find('h5').first().text(title);
						wrapper.data('title', title);
						wrapper.data('did', str);
						wrapper.data('dtype', 5);
						wrapper.data('mid', startdate);
						wrapper.data('color', enddate);
						wrapper.data('timerange', timer + ',' + timetype);
					}

					init_widget(wrapper);

					displayHelp();
					return false;
				});

				//OuterWebUrl
				$('#dashboard-OuterWeb-add-form').submit(function () {
					var name = $(this).find('#OuterWebName').val();
					var url = $(this).find('#OuterWebUrl').val();
					if (url == '') {
						jAlert('<h4>请输入外部网页的详细地址。</h4>', "");
						return false;
					}
					$('#dashboard-OuterWeb-add-modal').modal('hide');

					var wrapper = $('#dashboard-OuterWeb-add-modal').data('tagObj');
					if (!wrapper || wrapper == '') {
						wrapper = $('<li data-title="' + name + '" data-vtype="210" data-dtype="' + 0 + '"'
							+ ' data-color="" data-timerange=""'
							+ ' data-did="" data-mid="' + url + '" data-indicator=""></li>');

						wrapper.append('<h5>&nbsp;' + name + '</h5>'
							+ '<a href="javascript:;" class="gs-edit" style="display: inline;"><i style="color:' + sconColor + '" class="fa fa-pencil"></i></a>'
							+ '<a href="javascript:;" class="gs-close" style="display: inline;"><i style="color:' + sconColor + '" class="fa fa-times"></i></a>'
							+ '<a href="javascript:;" class="gs-refresh"><i style="color:' + sconColor + '" class="fa fa-refresh"></i></a>'
							+ '<div style="padding: 0px 15px 0 5px; text-align: center;">'
							+ '<div id="chartId" style="height: 170px;"></div></div>');

						gridster.add_widget(wrapper, 10, 7);
					} else {
						wrapper.find('h5').first().text(name);
						wrapper.data('title', name);
						wrapper.data('mid', url);
					}
					init_widget(wrapper);

					displayHelp();

					return false;
				});

				$('#dashboard-widget-lunbo-form').submit(function () {
					var n = $('#dashboard-widget-lunbo-form #ds-widget-refresh-lunbo').val();
					if (isNaN(n)) {
						jAlert('<h4>轮播频率请输入正确的数字。</h4>');
						return false;
					} else if (n <= 0) {
						jAlert('<h4>轮播频率请输入大于0的数字。</h4>');
						return false;
					}
					$('#dashboard-widget-lunbo-modal').modal('hide');
					lb_IntervalTime = n * 1000;
					lunBo();
					return false;
				});
			}
			catch (e) {
				if (isDebug)
					alert(e);
			}


			$('#background-help-img img').click(function () {
				$('#dashboard-widget-addbtngrp-modal').modal('show');
			});

			$('#warning-remark-form').submit(function () {
				var comment = $(this).serialize();
				var rid = $('#warning-remark-modal').data('rid');
				var ccu = $('#warning-remark-modal').data('ccu');
				var objdiv = $('#warning-remark-modal').data('objdiv');
				var paramstr = $('#warning-remark-modal').data('paramstr');
				var pageindex = $('#warning-remark-modal').data('pageindex');
				$('#warning-remark-modal').modal('hide');
				//处理时候
				var url = bsiurl + '/AlertEventLogOp.bsi?encoding=utf-8&optype=1&ccu=' + ccu + '&rid=' + rid;
				myGet(url, function (Json) {
					//{ "errorid" : 0, "errormessage" : "ok" } 
					if (Json.status == "success") {
						MyJs.Warning.loadnewWarning(objdiv, paramstr, pageindex);
						MyJs.Warning.loadnewWarningnext(objdiv, paramstr, 1);

						//添加备注
						url = bsiurl + '/AlertEventLogOp.bsi?encoding=utf-8&optype=3&ccu=' + ccu + '&rid=' + rid + '&' + comment;
						myGet(url, function (Json) {
							if (Json.status == "success") {
								MyJs.Warning.loadnewWarningnext(objdiv, paramstr, 1);
							}
							else {
								jAlert('<h4>备注出错，原因：' + Json.errmsg + '</h4>');
							}
						});
					}
					else {
						jAlert('<h4>处理出错，原因：' + Json.errmsg + '</h4>');
					}
				});

				return false;
			});

			$('#visio-modal').on('click', '.monitor-point', function () {
				var mid = $(this).data('mid');
				var pluginname = $(this).data('pluginname');
				if ($('#visio-modal .modal-body > div > div')) {
					$('#visio-modal .modal-body > div > div').html('');
				}
				showMonitorInfo(mid, pluginname, $('#visio-modal .modal-body > div'), 'a');
			});

			$('#visio-modal').on('click', '.bn_jcd', function () {
				var type = $('.bn_jcd').data('id');
				if (type == 1) {
					$('.bn_jcd').text('显示监测点');
					$('.bn_jcd').data('id', 2).attr('data-id', 2);
					$('#jcd_sys').css("display", "none");
				} else {
					$('.bn_jcd').text('隐藏监测点');
					$('.bn_jcd').data('id', 1).attr('data-id', 1);
					$('#jcd_sys').css("display", "block");
				}
			});
		});

		function GetListData(isLoad, id) {
			var pageid = window.sessionStorage.getItem('cur_pageid');
			if (pageid) {
				id = pageid;
				isLoad = false;
			}
			myGet(url, function (json) {
				if (json) {
					if (json[0] == '' || json[0] == null) {
						//alert(0)
						$('#dashboard-widget-editpage').css('display', 'none');
						$('#dashboard-widget-deletepage').css('display', 'none');
						$('#dashboard-widget-save').css('display', 'none');
						$('#dashboard-widget-lunbo').css('display', 'none');
						$('#dashboard-widget-show-hide').css('display', 'none');
					} else {
						$('#dashboard-widget-editpage').css('display', 'inline-block');
						$('#dashboard-widget-deletepage').css('display', 'inline-block');
						$('#dashboard-widget-save').css('display', 'inline-block');
						$('#dashboard-widget-lunbo').css('display', 'inline-block');
						$('#dashboard-widget-show-hide').css('display', 'inline-block');
					}
					if (json[0] != null) {
						json = json.sort(function (a1, a2) {
							if (Math.floor(a1.rowid) <= Math.floor(a2.rowid))
								return -1;
							else
								return 1;
						});
					}
					var str = "";
					for (i = 0; i < json.length; i++) {
						if (json[i] == null) continue;
						str += '<a href = "javascript:;" onclick=aMenuClick(this,"' + json[i].rowid + '","' + json[i].groupids + '") '
							+ ' data-id="' + json[i].rowid + '" ';
						if (json[i].color_ornot != undefined) {
							str += 'data-color_ornot="' + json[i].color_ornot + '" data-pagecolor="' + json[i].pagecolor + '" ';
						} else {
							str += 'data-color_ornot="0" data-pagecolor="" ';
						}
						str += 'data-isshowname="' + json[i].isshowname + '" data-frequency="' + json[i].frequency + '" data-description="' + json[i].description + '">'
							+ json[i].name + '</a>';
					}
					var $listdiv = $('div.pagename-list > div.pagename-content');
					$listdiv.html(str);

					if ($listdiv.children().length > 0 && isLoad) {
						$listdiv.children()[0].click();
					}
					else if (id > 0) {
						for (i = 0; i < json.length; i++) {
							if (json[i].rowid == id)
								$listdiv.children()[i].click();
						}
					}
					else if (id == -1) {
						var cl = $listdiv.children();
						if (cl.length > 0) {
							cl[cl.length - 1].click();
						}
					}
				}
			});
		}
		
		function checkHasTs() {
			//判断有没有设备
			var ServerType = getServerType();
			if (ServerType==3) { //saas云端
				myGetSync(bsiurl+'/BSCheckTSExist.bsi?encode=utf-8',function(json){
					if (json.status!='success') {
						window.location.href = 'Install.html';
					}
				});
			}
		}
	</script>
	<!-- InstanceEndEditable -->

	<div class="waitforload loadmask" style="display:none"></div>
	<div class="waitforload mask_lading" style="width:300px; height:60px; left:48%;top:49%;display:none">正在加载中...</div>

</body>
<!-- InstanceEnd -->

</html>